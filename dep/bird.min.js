/*@file:bird.min.js @author:liwei47@baidu.com @version:1.0.1 @date:2016-12-13 */
define("bird.__lrucache__",["./bird.object"],function(a){function b(){var a={maxsize:1e3,records:{},recordsIndex:[],slidingExpire:null,slidingExpireSecond:null,absoluteExpire:null,absoluteExpireSecond:null,lastAccessed:(new Date).getTime(),created:(new Date).getTime(),callback:function(){}},b=a;return b._setSlidingExpire=function(a){this.slidingExpireSecond=a,this.slidingExpire=this.lastAccessed+1e3*a},b._setAbsoluteExpire=function(a){this.absoluteExpireSecond=a,this.absoluteExpire=this.lastAccessed+1e3*a},b._isFull=function(){return this._getMaxSize()==this._usedSize()},b._setMaxSize=function(a){this._usedSize()>a||(this.maxsize=a)},b._getMaxSize=function(){return this.maxsize},b._usedSize=function(){return this.recordsIndex.length},b._push=function(a,b,c){this._pushRecord(a,b,this.recordsIndex.push(a)-1,c)},b._pushRecord=function(a,b,c,e){this.records[a]={index:c,value:b,callback:function(){},lastAccessed:(new Date).getTime()},!d.isEmpty(e.absoluteExpire)&&e.absoluteExpire>=1&&(this.records[a].absoluteExpire=this.records[a].lastAccessed+1e3*e.absoluteExpire,this.records[a].absoluteExpireSecond=e.absoluteExpire),!d.isEmpty(e.slidingExpire)&&e.slidingExpire>=1&&(!this.records[a].absoluteExpire||this.records[a].absoluteExpire&&this.records[a].absoluteExpire>e.slidingExpire)&&(this.records[a].slidingExpire=this.records[a].lastAccessed+1e3*e.slidingExpire,this.records[a].slidingExpireSecond=e.slidingExpire),e.callback&&"function"==typeof e.callback&&(this.records[a].callback=e.callback)},b._removeOldestRecord=function(){var a=this.recordsIndex.length-1,b=this.recordsIndex[a];this._callbackRecord("noSpace",this._getRecordByIndex(a),b),this._removeRecord(a)},b._unshift=function(a,b,c){this.recordsIndex.unshift(a);for(var d in this.records)this.records[d].index++;this._pushRecord(a,b,0,c)},b._updateAllRecordsIndex=function(a){for(var b in this.records)a<this.records[b].index&&this.records[b].index--},b._getCacheRecords=function(){if(0==this.recordsIndex.length)return!1;for(var a={},b=0;b<this.recordsIndex.length;b++)a[b]=this.records[this.recordsIndex[b]],a[b].key=this.recordsIndex[b];return a},b._getCache=function(){var a={};return a.maxsize=b._getMaxSize(),a.records=b._getCacheRecords(),a.absoluteExpire=b.absoluteExpire,a.slidingExpire=b.slidingExpire,a.absoluteExpireSecond=b.absoluteExpireSecond,a.slidingExpireSecond=b.slidingExpireSecond,a},b._getRecord=function(a){return this.records[a]?(this._updateRecordLastAccessed(this.records[a]),this.records[a]):!1},b._getRecordValue=function(a){return this.records[a]?(this._updateRecordLastAccessed(this.records[a]),this.records[a].value):!1},b._updateRecordLastAccessed=function(a){a.lastAccessed=(new Date).getTime(),this.lastAccessed=(new Date).getTime(),a.slidingExpire&&a.slidingExpire>=1&&this._updateRecordSlidingExpire(a)},b._updateRecordSlidingExpire=function(a){a.slidingExpire=a.lastAccessed+1e3*a.slidingExpireSecond},b._updateCacheSlidingExpire=function(){this.slidingExpire&&this.slidingExpire>=1&&(this.slidingExpire=this.lastAccessed+1e3*this.slidingExpireSecond)},b._flush=function(a){for(var c in this.records)b._callbackRecord("flush",this.records[c],c);this.records={},this.recordsIndex=[],this.slidingExpire=null,this.slidingExpireSecond=null,this.absoluteExpire=null,this.absoluteExpireSecond=null},b._cleanExpiredRecords=function(){var a,b,c;if(0!=this.recordsIndex.length)for(var d=0;d<this.recordsIndex.length;d++)c=this.recordsIndex[d],b=this._getRecordByIndex(d),(b.absoluteExpire||b.slidingExpire)&&(a=(new Date).getTime(),b.absoluteExpire<a?(this._expireRecord(d),this._callbackRecord("absoluteExipreRecord",b,c)):b.slidingExpire<a&&(this._expireRecord(d),this._callbackRecord("slidingExipreRecord",b,c)))},b._expireRecord=function(a){this._removeRecord(a)},b._getRecordByIndex=function(a){return this.records[this.recordsIndex[a]]},b._removeRecord=function(a){delete this.records[this.recordsIndex.splice(a,1)],this._updateAllRecordsIndex(a)},b._callbackRecord=function(a,b,d){var b=c.create(b);switch(b.key=d,b.type=a,a){case"absoluteExipreRecord":b.message="Absolute Expired : record  "+d+" is removed from the cache";break;case"slidingExipreRecord":b.message="Sliding Expired : record  "+d+" is removed from the cache ";break;case"flush":b.message="Flushed : record  "+d+" is removed from the cache cause the cache was flushed";break;case"noSpace":b.message="No Space : record  "+d+" is removed from the cache cause the cache was full"}b.callback.call(this,b)},b._isCacheExpired=function(){if(null==this.absoluteExpire&&null==this.slidingExpire)return!1;var a=(new Date).getTime();return null!=this.absoluteExpire&&this.absoluteExpire<a?(this._callback("absoluteExipreCache"),!0):null!=this.slidingExpire&&this.slidingExpire<a?(this._callback("slidingExipreCache"),!0):!1},b._callback=function(a){var b={type:a};switch(a){case"absoluteExipreCache":b.message="cache is expired ( Absolute Expire Cache )";break;case"slidingExipreCache":b.message="cache is expired ( Sliding Expire Cache )"}this.callback.call(this,b)},b._setCallback=function(a){this.callback=a},{setSize:function(a){return d.validArguments(arguments,1)&&b._setMaxSize(a),b._updateCacheSlidingExpire(),this.getSize()},getSize:function(){return b._updateCacheSlidingExpire(),b._getMaxSize()},add:function(a,c,e){if(!d.validArguments(arguments,2))return!1;if(e=e||{},b._isCacheExpired())return b._flush(),!1;b._cleanExpiredRecords(),b._updateCacheSlidingExpire();var f=b._getRecord(a);return f!==!1&&b._removeRecord(f.index),b._isFull()?(b._removeOldestRecord(),b._unshift(a,c,e)):b._push(a,c,e),this.get(a)},get:function(a){return d.validArguments(arguments,1)?(b._updateCacheSlidingExpire(),b._cleanExpiredRecords(),b._getRecord(a)):!1},getValue:function(a){return d.validArguments(arguments,1)?(b._updateCacheSlidingExpire(),b._cleanExpiredRecords(),b._getRecordValue(a)):!1},getCacheRecords:function(){return b._updateCacheSlidingExpire(),b._cleanExpiredRecords(),b._getCacheRecords()},getCache:function(){return b._updateCacheSlidingExpire(),b._cleanExpiredRecords(),b._getCache()},flush:function(){return b._flush()},settings:function(a){a.maxsize&&parseInt(a.maxsize)>0&&b._setMaxSize(a.maxsize),a.slidingExpire&&parseInt(a.slidingExpire)>0&&b._setSlidingExpire(a.slidingExpire),a.absoluteExpire&&parseInt(a.absoluteExpire)>0&&b._setAbsoluteExpire(a.absoluteExpire),a.callback&&"function"==typeof a.callback&&b._setCallback(a.callback)}}}var c=a("./bird.object"),d={rtrim:/^(\s|\u00A0)+|(\s|\u00A0)+$/g,trim:function(a){return void 0===a&&(a=""),(a.toString()||"").replace(this.rtrim,"")},isEmpty:function(a){return 0==a&&(a=""),""==this.trim(a)},validArguments:function(a,b){if(0==a.length||a.length<b)return!1;for(var c=0;c<a.length;c++)if(this.isEmpty(a[c]))return!1;return!0}};return b}),define("bird.__observer__",["./bird.lang","./bird.util"],function(a){function b(){this.channelMap={}}return function(){var b=a("./bird.lang"),c=a("./bird.util");this.subscribe=function(a,c){b.isFunction(c)&&(this.channelMap[a]=this.channelMap[a]||[],this.channelMap[a].push(c))},this.unsubscribe=function(a,b){if(1===arguments.length)return this.channelMap[a].length=0,void delete this.channelMap[a];if(!arguments.length){var d=this;return void c.forEach(this.channelMap,function(a,b){a.length=0,delete d.channelMap[b]})}var e=this.channelMap[a];e&&(c.forEach(e,function(a,c,d){a===b&&d.splice(c,1)}),e.length||delete this.channelMap[a])},this.publish=function(a){var b=Array.prototype.slice.call(arguments,1),d=this;c.forEach(this.channelMap[a]||[],function(a){a.apply(d,b)}),b=d=null},this.watch=this.subscribe,this.unwatch=this.unsubscribe,this.notify=this.publish}.call(b.prototype),b}),define("bird.accmath",[],function(a){function b(){}return function(){this.add=function(a,b){var c,d,e,f;try{c=a.toString().split(".")[1].length}catch(g){c=0}try{d=b.toString().split(".")[1].length}catch(g){d=0}if(f=Math.abs(c-d),e=Math.pow(10,Math.max(c,d)),f>0){var h=Math.pow(10,f);c>d?(a=Number(a.toString().replace(".","")),b=Number(b.toString().replace(".",""))*h):(a=Number(a.toString().replace(".",""))*h,b=Number(b.toString().replace(".","")))}else a=Number(a.toString().replace(".","")),b=Number(b.toString().replace(".",""));return(a+b)/e},this.sub=function(a,b){var c,d,e,f;try{c=a.toString().split(".")[1].length}catch(g){c=0}try{d=b.toString().split(".")[1].length}catch(g){d=0}return e=Math.pow(10,Math.max(c,d)),f=c>=d?c:d,Number(((a*e-b*e)/e).toFixed(f))},this.multiple=function(a,b){var c=0,d=a.toString(),e=b.toString();try{c+=d.split(".")[1].length}catch(f){}try{c+=e.split(".")[1].length}catch(f){}return Number(d.replace(".",""))*Number(e.replace(".",""))/Math.pow(10,c)},this.divide=function(a,b){var c,d,e=0,f=0;try{e=a.toString().split(".")[1].length}catch(g){}try{f=b.toString().split(".")[1].length}catch(g){}return c=Number(a.toString().replace(".","")),d=Number(b.toString().replace(".","")),c/d*Math.pow(10,f-e)}}.call(b.prototype),new b}),define("bird.animate",["./bird.lang","./bird.dom","./bird.animation"],function(a){function b(){}var c=a("./bird.lang"),d=a("./bird.dom");return function(){function b(a,b){for(var c in b)if(!/transform$|transform-origin$/i.test(c)){var e=/([\+|-])=\s*(-?[0-9\.%]+)(\w*)/.exec(b[c]);if(e){switch(e[1]){case"+":b[c]=parseFloat(d.getStyle(a,c))+parseFloat(e[2]);break;case"-":b[c]=parseFloat(d.getStyle(a,c))-parseFloat(e[2])}e[3]&&(b[c]+=e[3]),e=null}}}this.cache={};var e=this,f=a("./bird.animation");this.animate=function(a,d,g,h,i){b(a,d);var j;if(c.isPlainObject(g)){var k=g;j=new f(a,d,k.duration,k.delay,k.interval,k.tween,k.onInit,k.onRun,k.onComplete)}else j=new f(a,d,g,null,null,h,null,null,i);return j.start(),e.cache.currentFx=j,j},this.rotate=function(a,b,c,d){b={transform:"rotate("+b+")"},this.animate(a,b,c,null,d)},this.rotateX=function(a,b,c,d){b={transform:"rotateX("+b+")"},this.animate(a,b,c,null,d)},this.rotateY=function(a,b,c,d){b={transform:"rotateY("+b+")"},this.animate(a,b,c,null,d)},this.rotateZ=function(a,b,c,d){b={transform:"rotateZ("+b+")"},this.animate(a,b,c,null,d)},this.skew=function(a,b,c,d){b={transform:"skew("+b+")"},this.animate(a,b,c,null,d)},this.scale=function(a,b,c,d){b={transform:"scale("+b+")"},this.animate(a,b,c,null,d)},this.translate=function(a,b,c,d){b={transform:"translate("+b+")"},this.animate(a,b,c,null,d)},this.fadeIn=function(a,b,e){if(d.isHidden(a)){if(1===arguments.length||c.isFunction(b))return a.style.display="block",d.css(a,{opacity:a.$oldopacity||1}),void(b&&(e=b,e.call(this)));switch(b){case"slow":b=600;break;case"normal":b=400;break;case"fast":b=200}return d.isHidden(a)&&(a.style.display="block",a.$oldopacity=parseFloat(d.getStyle(a,"opacity")),d.css(a,{opacity:0})),this.animate(a,{opacity:a.$oldopacity||1},b||400,null,function(){this.elem.style.display="block",d.css(this.elem,{opacity:a.$oldopacity||1}),a.$oldopacity=null,c.isFunction(e)&&e.call(this)})}},this.fadeOut=function(a,b,e){if(!d.isHidden(a)){if(1===arguments.length||c.isFunction(b))return a.style.display="none",d.css(a,{opacity:a.$oldopacity||1}),void(b&&(e=b,e.call(this)));switch(b){case"slow":b=600;break;case"normal":b=400;break;case"fast":b=200}return d.isHidden(a)&&(a.style.display="block"),a.$oldopacity=parseFloat(d.getStyle(a,"opacity")),this.animate(a,{opacity:0},b||400,null,function(){this.elem.style.display="none",d.css(this.elem,{opacity:a.$oldopacity||1}),a.$oldopacity=null,c.isFunction(e)&&e.call(this)})}},this.slideUp=function(a,b,e,f){if(!d.isHidden(a)){switch(c.isFunction(b)&&(f=b,b="normal"),b){case"slow":b=600;break;case"normal":b=400;break;case"fast":b=200}var g=a.$oldheight=a.$oldheight||d.getStyle(a,"height");"auto"===g?g=d.fullHeight(a)+"px":g,a.$oldOverflow=d.getStyle(a,"overflow"),d.css(a,{overflow:"hidden",height:g});var h=function(){d.css(a,{display:"none",overflow:a.$oldOverflow,height:a.$oldheight}),a.$oldOverflow=null,a.$oldheight=null,c.isFunction(f)&&f.call(this)};return this.animate(a,{height:"0px"},b||400,e,h)}},this.slideDown=function(a,b,e,f){if(d.isHidden(a)){switch(c.isFunction(b)&&(f=b,b="normal"),b){case"slow":b=600;break;case"normal":b=400;break;case"fast":b=200}a._$oldheight=a.$oldheight=a.$oldheight||d.getStyle(a,"height"),"auto"===a.$oldheight?a.$oldheight=d.fullHeight(a)+"px":a.$oldheight,a.$oldOverflow=d.getStyle(a,"overflow"),d.css(a,{height:"0px",display:"block",overflow:"hidden"});var g=function(){d.css(a,{overflow:a.$oldOverflow,height:a._$oldheight}),a.$oldOverflow=null,a.$oldheight=null,c.isFunction(f)&&f.call(this)};return this.animate(a,{height:a.$oldheight},b||400,e,g)}},this.slideLeft=function(a,b,e,f){switch(c.isFunction(b)&&(f=b,b="normal"),b){case"slow":b=600;break;case"normal":b=400;break;case"fast":b=200}var g=a.$oldwidth=a.$oldwidth||d.getStyle(a,"width");"auto"===g?g=d.fullWidth(a)+"px":g,a.$oldOverflow=d.getStyle(a,"overflow"),d.css(a,{overflow:"hidden"});var h=function(){d.css(a,{display:"none",overflow:a.$oldOverflow,width:a.$oldwidth}),a.$oldOverflow=null,a.$oldwidth=null,c.isFunction(f)&&f.call(this)};return this.animate(a,{width:"0px"},b||400,e,h)},this.slideRight=function(a,b,e,f){switch(c.isFunction(b)&&(f=b,b="normal"),b){case"slow":b=600;break;case"normal":b=400;break;case"fast":b=200}a._$oldwidth=a.$oldwidth=a.$oldwidth||d.getStyle(a,"width"),"auto"===a.$oldwidth?a.$oldwidth=d.fullWidth(a)+"px":a.$oldwidth,a.$oldOverflow=d.css(a,"overflow"),d.css(a,{width:"0px",display:"block",overflow:"hidden"});var g=function(){d.css(a,{overflow:a.$oldOverflow,width:a._$oldwidth}),a.$oldOverflow=null,a.$oldwidth=null,c.isFunction(f)&&f.call(this)};return this.animate(a,{width:a.$oldwidth,overflow:a.$oldOverflow},b||400,e,g)},this.moveY=function(a,b,c,d,e){return this.animate(a,{top:b},c||400,d,e)},this.moveX=function(a,b,c,d,e){return this.animate(a,{left:b},c||400,d,e)},this.delay=function(a,b){void 0===b&&(b=a,a=null);var c={busy:1,onComplete:a||function(){},isBusy:function(){return this.busy}};return setTimeout(function(){c.busy=0,c.onComplete()},b),e.cache.currentFx=c,c},this.serialAnimate=function(a){a.shift()();var b=e.cache.currentFx.onComplete,d=this;e.cache.currentFx.onComplete=function(){c.isFunction(b)&&b.call(this),a.length>0&&d.serialAnimate(a)}},this.parallelAnimate=function(a){c.forEach(a,function(a){a()})}}.call(b.prototype),new b}),define("bird.animation",["./bird.lang","./bird.dom","./bird.logger","./bird.requestframe","./bird.tween"],function(a){function b(a,b,c,d,e,f,g,h,i){this.elem=a,this.props=b,this.duration=c,this.delay=d,this.interval=e,this.tween=f,this.onInit=g,this.onRun=h,this.onComplete=i}var c=a("./bird.lang"),d=a("./bird.dom"),e=a("./bird.logger"),f=a("./bird.requestframe");return function(){function b(a,b){return a.replace(o.rotate,function(a,c,d,e,f){return"rotate("+b+"deg)"})}function g(a,b){return a.replace(o.rotateX,function(a,c,d,e,f){return"rotateX("+b+"deg)"})}function h(a,b){return a.replace(o.rotateY,function(a,c,d,e,f){return"rotateY("+b+"deg)"})}function i(a,b){return a.replace(o.rotateZ,function(){return"rotateZ("+b+"deg)"})}function j(a,b,c){return a.replace(o.skew,function(){return"skew("+b+"deg,"+c+"deg)"})}function k(a,b,c){return a.replace(o.scale,function(){return"scale("+b+","+c+")"})}function l(a,b,c){return a.replace(o.translate,function(){return"translate("+b+"px,"+c+"px)"})}var m=a("./bird.tween");this.init=function(){this.tween=c.isString(this.tween)?m[this.tween]||m.linear:c.isFunction(this.tween)?this.tween:m.linear,this.frames=Math.ceil(this.duration/this.interval),this.cssText=this.elem.style.cssText.replace(/\s/g,""),this.isRunning=0,this.units={},this.cprop={},this.$props={},this.$cprop={},this.$oldProp={};for(var a in this.props)if(!/transform$|transform-origin$/i.test(a)){this.hasCommonProperty||(this.hasCommonProperty=1),this.$oldProp[a]=d.getStyle(this.elem,a);var b=/^-?\d+(?:\.?\d+)?([a-zA-Z]+)/.exec(this.props[a]);this.units[a]=b?b[1]:"",this.cprop[a]=this.$oldProp[a],this.$props[a]=parseFloat(this.props[a]),this.$cprop[a]=parseFloat(this.cprop[a])}if(this.count=0,this.waitTime=0,this.props.transform){this.cTransformPropText=d.getStyle(this.elem,"-webkit-transform"),this.cTransformPropText&&"none"!==this.cTransformPropText||(this.cTransformPropText=""),this.transformPropText=this.props.transform,this._prop={},this._cprop={};for(var a=0,e=r.length;e>a;a++){var f=r[a],g=o[f].exec(this.transformPropText),h=o[f].exec(this.cTransformPropText);g&&(this._cprop[f]=h?h[4]?[parseFloat(h[2]),parseFloat(h[4])]:h[2]?[parseFloat(h[2])]:p[f]:p[f],this._prop[f]=g[4]?["+="===g[1]?this._cprop[f][0]+parseFloat(g[2]):"-="===g[1]?this._cprop[f][0]-parseFloat(g[2]):parseFloat(g[2]),"+="===g[3]?this._cprop[f][1]+parseFloat(g[4]):"-="===g[3]?this._cprop[f][1]-parseFloat(g[4]):parseFloat(g[4])]:["+="===g[1]?this._cprop[f][0]+parseFloat(g[2]):"-="===g[1]?this._cprop[f][0]-parseFloat(g[2]):parseFloat(g[2])],h&&null!=h[2]||(this.cTransformPropText+=" "+f+"("+p[f][0]+q[f],null!=p[f][1]&&(this.cTransformPropText+=",",this.cTransformPropText+=p[f][1]+q[f]),this.cTransformPropText+=")"))}this.hasTransform=1,delete this.props.transform}},this.start=function(){this.init(),c.isFunction(this.onInit)&&this.onInit.call(this),this.hasOnRun=c.isFunction(this.onRun)?1:0,this.props["transform-origin"]&&(this.elem.style["-webkit-transform-origin"]=this.props["transform-origin"],delete this.props["transform-origin"]);var a=this;this.intervalfn=function(){a.startTime=a.startTime||f.now(),a.startTime+=a.waitTime,a.isRunning=1,a.pos=0,a.timerId=f.requestAFrame(function(){a.timerId=f.requestAFrame(arguments.callee);var b=f.now()-a.startTime;if(b<=a.duration){if(a.pos=a.tween(b,0,1,a.duration),a.hasCommonProperty)for(var d in a.$props)a.cprop[d]=a.$cprop[d]+(a.$props[d]-a.$cprop[d])*a.pos+a.units[d],a.elem.style[d]=a.cprop[d],e.log(a.elem.style[d]);if(a.hasTransform){for(d in a._prop){var g,h=a._prop[d],i=a._cprop[d],j=i[0]+(h[0]-i[0])*a.pos;null!=h[1]&&(g=i[1]+(h[1]-i[1])*a.pos),a.cTransformPropText=n[d](a.cTransformPropText,j,g)}a.elem.style["-webkit-transform"]=a.cTransformPropText}a.hasOnRun&&a.onRun.call(a),a.count++}else{if(a.timerId&&(f.cancelAFrame(a.timerId),a.timerId=null),a.isRunning=-1,a.hasCommonProperty)for(var d in a.props)a.elem.style[d]=a.props[d];if(a.hasTransform){for(d in a._prop)a.cTransformPropText=n[d](a.cTransformPropText,a._prop[d][0],a._prop[d][1]);a.elem.style["-webkit-transform"]=a.cTransformPropText}c.isFunction(a.onComplete)&&a.onComplete.call(a)}})},this.delay?setTimeout(this.intervalfn,this.delay):this.intervalfn()},this.pause=function(){self.timerId&&(f.cancelAFrame(self.timerId),self.timerId=null),this.isRunning=0,this.waitTime=f.now()},this.resume=function(){this.isRunning||(this.waitTime=f.now()-this.waitTime,this.intervalfn())},this.stop=function(a){self.timerId&&(f.cancelAFrame(self.timerId),self.timerId=null),this.isRunning=-1,this.clear()},this.reset=function(){this.stop(),d.css(this.elem,this.$oldProp)},this.clear=function(){for(var a in this){var b=this[a];if(c.isPlainObject(b))for(var d in b)delete b[d];delete this[a]}},this.isBusy=function(){return 1===this.isRunning};var n={rotate:b,rotateX:g,rotateY:h,rotateZ:i,scale:k,skew:j,translate:l},o={rotate:/rotate\s*\(\s*([+|-]=)?\s*(-?[0-9.]+)deg\s*\)/,rotateX:/rotateX\s*\(\s*([+|-]=)?\s*(-?[0-9.]+)deg\s*\)/,rotateY:/rotateY\s*\(\s*([+|-]=)?\s*(-?[0-9.]+)deg\s*\)/,rotateZ:/rotateZ\s*\(\s*([+|-]=)?\s*(-?[0-9.]+)deg\s*\)/,skew:/skew\s*\(\s*([+|-]=)?\s*(-?[0-9.]+)deg\s*,\s*([+|-]=)?\s*(-?[0-9.]+)deg\s*\)/,scale:/scale\s*\(\s*([+|-]=)?\s*(-?[0-9.]+)\s*,\s*([+|-]=)?\s*(-?[0-9.]+)\s*\)/,translate:/translate\s*\(\s*([+|-]=)?\s*(-?[0-9.]+)px\s*,\s*([+|-]=)?\s*(-?[0-9.]+)px\s*\)/},p={rotate:[0],rotateX:[0],rotateY:[0],rotateZ:[0],skew:[0,0],scale:[1,1],translate:[0,0]},q={rotate:"deg",rotateX:"deg",rotateY:"deg",rotateZ:"deg",skew:"deg",scale:"",translate:"px"},r=["rotate","rotateX","rotateY","rotateZ","skew","scale","translate"]}.call(b.prototype),b}),define("bird.array",["./bird.lang"],function(a){function b(){}var c=a("./bird.lang");return function(){this.each=function(a,b){for(var c=0;c<a.length;c++)if(b.call(this,a[c],c,a)===!1)return!1;return!0},this.forEach=function(a,b){if(a.forEach)return a.forEach(b);for(var c=a.length,d=0;c>d;d++)b.call(this,a[d],d,a)},this.descArrayEach=function(a,b){for(var c=a.length-1;c>=0;c--)b.call(this,a[c],c,a)},this.filter=function(a,b){if(c.isFunction(b)){var d=[];return this.forEach(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d}},this.pushUniqueInArray=function(a,b){var c=!1;this.each(b,function(b){return b===a?(c=!0,!1):void 0}),c||b.push(a)},this.uniquelize=function(a){var b=a.slice();return a.length=0,this.forEach(b,function(b,c,d){for(var e=!0,f=c+1;f<d.length;f++)if(d[f]===b){e=!1;break}e&&a.push(b)}),b=null,a},this.remove=function(a,b){this.forEach(b,function(b,c,d){b===a&&d.splice(c,1)})},this.every=function(a,b){return this.each(a,b)},this.some=function(a,b){var c=!1;return this.each(a,function(a,d,e){return b(a,d,e)?(c=!0,!1):void 0}),c},this.contains=function(a,b){if(c.isArray(a)&&c.isArray(b)){var d=b,e=a;if(d.length<e.length){var f=d;d=e,e=f}for(var g=e.length;g--;)if(!this.contains(e[g],d))return!1;return!0}if(c.isArray(a)){var h=a;a=b,b=h}for(var i=b.length;i--;)if(b[i]===a)return!0;return!1},this.union=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),c=Array.prototype.concat.apply(a,b);return this.uniquelize(c)},this.difference=function(a,b){a=this.uniquelize(a);var c=this,d=[];return this.forEach(a,function(a){c.contains(a,b)||d.push(a)}),d},this.intersect=function(a,b){a=this.uniquelize(a);var c=this,d=[];return this.forEach(a,function(a){c.contains(a,b)&&d.push(a)}),d},this.complement=function(a,b){return this.difference(this.union(a,b),this.intersect(a,b))},this.maplize=function(a){var b={};return this.forEach(a,function(a,c){b[c]=a}),b}}.call(b.prototype),new b}),define("bird.browser",["./bird.lang"],function(a){function b(){this.init()}return function(){var b=document,c=a("./bird.lang");this.init=function(){this.lang=navigator.language?navigator.language:navigator.systemLanguage,this.resolution={width:screen.width,height:screen.height},this.pageSize={width:b.body.scrollWidth||b.documentElement.scrollWidth,height:b.body.scrollHeight||b.documentElement.scrollHeight},this.colorDepth=screen.pixelDepth||screen.colorDepth;var a=navigator.userAgent.toLowerCase();this.isMobile=/mobile/.test(a),this.isIPAD=/ipad/.test(a),this.isIPHONE=/iphone/.test(a),this.isIOS=/ipad|iphone|ipod/.test(a),this.isBB=/blackberry/.test(a),this.isNOKIA=/nokia/.test(a),this.isSYMBIAN=/symbianos/.test(a),this.isANDROID=/android/.test(a),this.isWP=/windows phone/.test(a);var d=(/ipad|iphone|android|blackberry|windows phone|windows mobile|win 9x|windows nt|mac os/.exec(a)||["unknown"])[0],e={ipad:function(a){var b=a.match(/os\s+[\d_.]+/)[0];return"ipad i"+b.replace(/_/g,".")},iphone:function(a){var b=a.match(/os\s+[\d_.]+/)[0];return"iphone i"+b.replace(/_/g,".")},android:function(a){return a.match(/android\s+[\d.]+/)[0]},"windows phone":function(a){return"wp "+a.match(/os\s+([\d.]+)/)[1]},"windows mobile":"windows mobile","win 9x":"win 9x","windows nt":function(a){var b={"4.0":"nt 4.0","5.0":"2000",5.1:"xp",5.2:"2003","6.0":"vista",6.1:"7",6.2:"8"};return"win "+b[a.match(/nt\s+([\d.]+)/)[1]]},blackberry:"blackberry","mac os":"mac os",unknown:"unknown os"};if(this.os=e[d],c.isFunction(this.os)&&(this.os=this.os(a)),this.browser=/ios/.test(this.os)&&!/opera/.test(a)&&/version/.test(a)?"safari":"",this.browser=this.browser||(/android/.test(this.os)&&!/opera/.test(a)&&/version/.test(a)?"android webkit浏览器":""),!this.browser){var f=(/metasr|taobrowser|qqbrowser|maxthon|lbbrowser|(?:ucbrowser|ucweb)/.exec(a)||/(?:msie|slcc)|(?:firefox|gecko\/)|opera|(?:chrome|crios)|iemobile/.exec(a)||["unknown"])[0],g={metasr:"搜狗浏览器",taobrowser:"淘宝浏览器",qqbrowser:"QQ浏览器",maxthon:"遨游浏览器",lbbrowser:"猎豹浏览器",msie:function(a){return"ie "+a.match(/msie\s+(\d+)(?:\.\d+)?/)[1]},slcc:function(a){return"ie "+a.match(/rv:(\d+)(?:\.\d+)?/)[1]},firefox:"firefox","gecko/":"firefox",opera:"opera",chrome:"chrome",crios:"chrome",iemobile:"移动IE浏览器",unknown:"unknown browser"};this.browser=this.browser||g[f],c.isFunction(this.browser)&&(this.browser=this.browser(a))}var h="firefox"===this.browser,i=/ie/.test(this.browser),j="ie 8"===this.browser;if(i)var k=this.browser.split(/\s+/),l=k&&+k[1];this.isFirefox=function(){return h},this.isIE=function(){return i},this.getIEVersion=function(){return l},this.isIE8=function(){return j}}}.call(b.prototype),new b}),define("bird.chain",["./bird.object","./bird.string"],function(a){function b(){this.data=null}var c=a("./bird.object"),d=a("./bird.string");return function(){this.chain=function(a){return this.data=a,this},this.wrapFn=function(a,b,c,e){var f=this;this["$"+(c||"")+d.capitalize(b||a.name)]=function(){var b=Array.prototype.slice.call(arguments);b.unshift(f.data);var c=a.apply(e,b);return this.data=null==c?this.data:c,b=c=null,f}},this.wrapModule=function(a,b){var d=this;c.forEach(a,function(a,c,e){d.wrapFn(a,c,b,e)},!0)},this.toData=function(){return this.data},this.custom=function(a){var b=a(this.data);return this.data=null==b?this.data:b,b=null,this}}.call(b.prototype),new b}),define("bird.class",["./bird.object"],function(a){function b(){}var c=a("./bird.object");return function(){this.inherit=function(a,b){var d;if(Object.create)d=Object.create(b.prototype);else{var e=new Function;e.prototype=b.prototype,d=new e}a.superClass=b;var f=a.prototype;return a.prototype=d,d=null,c.forEach(f,function(c,d){a.prototype[d]&&(c.__propertyname__=d,c.__superclass__=b),a.prototype[d]=c},!0),b.prototype.$superMethod||(b.prototype.$superMethod=function(a){var b=this.$superMethod.caller,c=b.__propertyname__,d=b.__superclass__;d.prototype[c].apply(this,a)}),b.prototype.$superConstructor||(b.prototype.$superConstructor=function(a){var b=this.$superConstructor.caller;b.superClass.apply(this,a)}),a.prototype.constructor=a,a}}.call(b.prototype),new b}),define("bird.cookie",[],function(a){function b(){this.length=0}return function(){function a(a){return"string"==typeof a&&""!==a}function b(b){return a(b)}function c(b,c){if(a(b)){var d=String(document.cookie).match(new RegExp("(?:^| )"+b+"(?:(?:=([^;]*))|;|$)"));if(d)return(d=d[1])?c?decodeURIComponent(d):d:""}return null}this.setItem=function(a,c,d){if(b(a)){d=d||{};var e=d.expires;"number"==typeof e&&(e=new Date,e.setTime(e.getTime()+d.expires)),document.cookie=a+"="+(d.raw?c:encodeURIComponent(c))+(e instanceof Date?"; expires="+e.toUTCString():"")+(d.domain?"; domain="+d.domain:"")+(d.path?"; path="+d.path:"")+(d.secure?"; secure":""),this.length=document.cookie.match(/\=/g).length}},this.getItem=function(a,d){return d=d||{},c(b(a)?a:"",!d.raw)},this.removeItem=function(a,b){b=b||{},b.raw=!0,b.expires=new Date(0),this.setItem(a,"",b),this.length--}}.call(b.prototype),new b}),define("bird.css3animate",["./bird.css3animation"],function(a){function b(){}return function(){var b=a("./bird.css3animation");this.cssAnimate=function(a,c,d,e){new b(a,c,d,e).start()}}.call(b.prototype),new b}),define("bird.css3animation",["./bird.lang","./bird.event"],function(a){function b(a,b,c,d){this.element=a,this.animationName=b,this.duration=c,this.opts=d}var c=a("./bird.lang"),d=a("./bird.event");return function(){this.cache={};var a=this;this.find=function(a){for(var b=document.styleSheets,c=b.length-1;c>=0;c--)try{for(var d=b[c],e=d.cssRules?d.cssRules:d.rules?d.rules:[],f=e.length-1;f>=0;f--)if((e[f].type===window.CSSRule.WEBKIT_KEYFRAMES_RULE||e[f].type===window.CSSRule.MOZ_KEYFRAMES_RULE)&&e[f].name==a)return e[f]}catch(g){}return null},this.init=function(){var a=null;this.options={easing:"linear",iterationCount:1};for(var b in this.opts)this.options[b]=this.opts[b];return this.onComplete=c.isFunction(this.opts)?this.opts:this.opts&&c.isFunction(this.opts.onComplete)?this.opts.onComplete:null,this.element.isPlaying?void 0:(a=this.find(this.animationName),a?void 0:!1)},this.start=function(){this.init();var b=(percentage=roundedKey=keyframe=null,!1);this.applyCSSAnimation=function(a){b=!1,void 0!==this.element.style.WebkitAnimationName&&(this.element.style.WebkitAnimationDuration=a.duration,this.element.style.WebkitAnimationTimingFunction=a.timingFunction,this.element.style.WebkitAnimationIterationCount=a.iterationCount,this.element.style.WebkitAnimationName=a.name,b=!0)},a.cache.currentFx=this,this.applyCSSAnimation({name:this.animationName,duration:this.duration+"ms",timingFunction:this.options.easing,iterationCount:this.options.iterationCount}),this.element.isPlaying=!0;var e=this;d.addListener(this.element,"webkitAnimationEnd",function(a){d.removeListener(e.element,"webkitAnimationEnd",arguments.callee),e.applyCSSAnimation({name:null,duration:null,timingFunction:null,iterationCount:0}),e.element.isPlaying=0,c.isFunction(e.onComplete)&&e.onComplete()})},this.isBusy=function(){return this.element.isPlaying}}.call(b.prototype),b}),define("bird.date",["moment"],function(a){function b(){}var c=a("moment");return c.locale("zh-cn"),function(){this.dateFormats=["YYYYMMDDHHmmss","YYYY-MM-DD HH:mm:ss","YYYY/MM/DD HH:mm:ss","YYYY-MM-DDTHH:mm:ss.SSSZ"],this.now=function(){return Date.now?Date.now():(new Date).getTime()},this.format=function(a,b){return c(a).format(b)},this.parse=function(a,b){var d=c(a,b||this.dateFormats);return d.toDate()}}.call(b.prototype),new b}),define("bird.dom",["./bird.lang","./bird.util","./bird.string","./bird.array"],function(a){function b(){this.cache={},this.isOuterHTMLSupported="outerHTML"in(document.body||document.documentElement),this.wrapMap={table:[1,"<table>","</table>"],tbody:[2,"<table><tbody>","</tbody></table>"],thead:[2,"<table><thead>","</thead></table>"],tfoot:[2,"<table><tfoot>","</tfoot></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"]}}var c=a("./bird.lang"),d=a("./bird.util"),e=a("./bird.string"),f=a("./bird.array");return function(){function a(a,b){if("float"===a){if("styleFloat"in b.style)return"styleFloat";if("cssFloat"in b.style)return"cssFloat"}return a}var b=document.documentElement,g=document.body,h="BackCompat"==document.compatMode?g:b;this.g=this.get=this.getElement=function(a,b){return this.getElements(a,b)[0]},this.gById=this.getElementById=function(a){return c.isString(a)?document.getElementById(a):a},this.getAll=this.getElements=function(a,b,d){if(!c.isString(a))return c.isArray(a)?a:[a];if(/^#([a-zA-Z_$][0-9a-zA-Z_$-]*)$/.test(a)){var e=document.getElementById(RegExp.$1);if(e)return[e]}for(var f=b||document,g=f.querySelectorAll(a),h=Number(g.length)||0,i=[],j=0;h>j;j++)if(d){for(var k=0,l=d.length;l>k;k++)if(g[j]===d[k]){i.push(g[j]);break}}else i.push(g[j]);return i},this.index=function(a,b){var c=-1;return f.each(b,function(b,d,e){return b===a?(c=d,!1):void 0}),c},this.getRadioValue=function(a){var b=a.parentNode,c=this.getElements("input[type=radio]",b);c.length<2&&(c=this.getElements("input[name="+a.name+"]"));var d,e=a.name;return f.each(c,function(a){return a.name===e&&a.checked?(d=a.value,!1):void 0}),d},this.getRadios=function(a,b){var c=this.getElements("input[name="+a.name+"]",a.ownerDocument),d=a.name,e=arguments.length>1,g=[];return f.forEach(c,function(a){a.name===d&&(!e||e&&a.checked==!!b)&&g.push(a)}),g},this.getCheckboxValues=function(a){var b=this.getElements("input[name="+a.name+"]",a.ownerDocument),c=a.name,d=[];return f.forEach(b,function(a){a.name===c&&a.checked&&d.push(a.value)}),d},this.getCheckboxs=function(a,b){var c=this.getElements("input[name="+a.name+"]",a.ownerDocument),d=a.name,e=arguments.length>1,g=[];return f.forEach(c,function(a){a.name===d&&(!e||e&&a.checked==!!b)&&g.push(a)}),g},this.getSelectedOptionValues=function(a){var b=a.options||this.getElements("option",a),c=[];return f.forEach(b,function(a){a.selected&&c.push(a.value)}),c},this.getOptionsOfSelect=function(a){return a.options||this.getElements("option",a)},this.getCheckedChildRadioInputValue=function(a){var b,c=this.getElements("input[type=radio]",a);return f.each(c,function(a){return a.checked?(b=a.value,!1):void 0}),b},this.removeNode=function(a){
if(a=this.getElementById(a)){var b=a.parentNode;b&&b.removeChild(a)}},this.replaceNode=function(a,b){if(a&&b){var c=a.parentNode;c&&c.replaceChild(b,a)}},this.insertAfter=function(a,b){var c=b.parentNode;return c&&c.insertBefore(a,b.nextSibling),a},this.insertBefore=function(a,b){var c=b.parentNode;return c&&c.insertBefore(a,b),a},this.appendTo=function(a,b){if(c.isString(a)){var d=document.createElement("div");d.innerHTML=a,a=d.childNodes,1===a.length&&(a=a[0]),d=null}return c.isArrayLike(a)?f.forEach(a,function(a){b.appendChild(a)}):b.appendChild(a),a},this.getChildren=function(a){return f.filter(a.children,function(a){return 1===a.nodeType})},this.getText=function(a){var b="";if(3===a.nodeType||4===a.nodeType)b+=a.nodeValue;else if(8!==a.nodeType){var c=this;f.forEach(a.childNodes,function(a){b+=c.getText(a)})}return b},this.hasParent=function(a,b){for(;a&&a!==b;)a=a.parentNode;return a===b},this.getTargetForm=function(a){for(;a&&!/^form$/i.test(a.nodeName);)a=a.parentNode;return a},this.getTreePath=function(a,b){b=b||document.body;for(var c=[];a&&a.tagName&&a!==b;){var d=a.getAttribute("id")||a.id;if(c.unshift(a.tagName+(d?"[id="+d+"]":"")),d)break;a=a.parentNode}return c.length?c.join("->"):""},this.css=function(b,d,f){if(c.isUndefined(f)){if(c.isString(d))return d=a(d,b),b.style[e.camelize(d)];if(c.isPlainObject(d)){var g=null==b.style.cssText?b.getAttribute("style"):b.style.cssText;g=g.replace(/\s/g,"");for(var h in d){var i=new RegExp("^("+h+":)-?(?:[a-zA-Z0-9.%#(,)]+)?","ig");i.test(g)?g=g.replace(i,"$1"+d[h]):g+=";"+h+":"+d[h]}g=g.replace(/;{2,}/,";"),null==b.style.cssText?b.setAttribute("style",g):b.style.cssText=g,g=null,i=null,b=null}}else d=a(d,b),b.style[e.camelize(d)]=f},this.getComputedStyle=function(a,b){if(!a)return"";var c=9==a.nodeType?a:a.ownerDocument||a.document;if(c.defaultView&&c.defaultView.getComputedStyle){var d=c.defaultView.getComputedStyle(a,null);if(d)return d[b]||d.getPropertyValue(b)}else if(a&&a.currentStyle)return a.currentStyle[b];return""},this.getStyle=function(a,b){return b=e.camelize(b),a.style[b]||(a.currentStyle?a.currentStyle[b]:this.getComputedStyle(a,b))},this.getOffset=function(a){var b=a.getBoundingClientRect(),c={top:b.top,right:b.right,bottom:b.bottom,left:b.left,width:b.right-b.left,height:b.bottom-b.top},d=document.documentElement.clientTop||document.body.clientTop||0,e=document.documentElement.clientLeft||document.body.clientLeft||0,f=window.pageYOffset||document.documentElement.scrollTop,g=window.pageXOffset||document.documentElement.scrollLeft;return c.top=c.top+f-d,c.bottom=c.bottom+f-d,c.left=c.left+g-e,c.right=c.right+g-e,c},this.getClassList=function(a){return a.className?a.className.split(/\s+/):[]},this.hasClass=function(a,b){if(a=this.getElementById(a),""===b)throw new Error("className must not be empty");if(!a||!b)return!1;if(a.classList)return a.classList.contains(b);var c=this.getClassList(a);return f.contains(c,b)},this.addClass=function(a,b){if(a=this.getElementById(a),""===b)throw new Error("className must not be empty");if(!a||!b)return a;if(a.classList)return a.classList.add(b),a;var c=this.getClassList(a);return f.contains(c,b)?a:(c.push(b),a.className=c.join(" "),a)},this.addClasses=function(a,b){if(a=this.getElementById(a),!a||!b)return a;if(a.classList)return f.forEach(b,function(b){a.classList.add(b)}),a;var c=this.getClassList(a),d=f.union(c,b);return d.length>c.length&&(a.className=d.join(" ")),a},this.removeClass=function(a,b){if(a=this.getElementById(a),""===b)throw new Error("className must not be empty");if(!a||!b)return a;if(a.classList)return a.classList.remove(b),a;for(var c=this.getClassList(a),d=!1,e=0;e<c.length;e++)c[e]===b&&(c.splice(e,1),e--,d=!0);return d&&(a.className=c.join(" ")),a},this.removeClasses=function(a,b){if(a=this.getElementById(a),!a||!b)return a;if(a.classList)return f.forEach(b,function(b){a.classList.remove(b)}),a;var c=this.getClassList(a),d=f.difference(c,b);return d.length<c.length&&(a.className=d.join(" ")),a},this.toggleClass=function(a,b){if(a=this.getElementById(a),""===b)throw new Error("className must not be empty");if(!a||!b)return a;if(a.classList)return a.classList.toggle(b),a;for(var c=this.getClassList(a),d=!1,e=0;e<c.length;e++)c[e]===b&&(c.splice(e,1),d=!0,e--);return d||c.push(b),a.className=c.join(" "),a},this.isHidden=function(a){return"none"===this.getStyle(a,"display")},this.resetCss=function(a,b,f){a.$guid||(a.$guid=d.uuid()),this.cache[a.$guid]={};var g={};if(void 0===f&&c.isPlainObject(b)){var h=null==a.style.cssText?a.getAttribute("style"):a.style.cssText;h=h.replace(/\s/g,"");for(var i in b){g[i]=a.style[e.camelize(i)];var j=new RegExp("("+i+":)-?(?:[a-zA-Z0-9.%#]+)?","ig");j.test(h)?h=h.replace(j,"$1"+b[i]):h+=";"+i+":"+b[i]}h=h.replace(/;{2,}/,";"),null==a.style.cssText?a.setAttribute("style",h):a.style.cssText=h,h=null,j=null}else g[b]=a.style[e.camelize(b)],a.style[e.camelize(b)]=f;this.cache[a.$guid].oldCss=g},this.restoreCss=function(a){if(this.cache[a.$guid]&&this.cache[a.$guid].oldCss){var b=this.cache[a.$guid].oldCss,c=null==a.style.cssText?a.getAttribute("style"):a.style.cssText;c=c.replace(/\s/g,"");for(var d in b){var e=new RegExp("("+d+":)-?(?:[a-zA-Z0-9.%#]+)?","ig");e.test(c)?c=c.replace(e,"$1"+b[d]):c+=";"+d+":"+b[d]}c=c.replace(/;{2,}/,";"),null==a.style.cssText?a.setAttribute("style",c):a.style.cssText=c,c=null,e=null,delete this.cache[a.$guid].oldCss,delete this.cache[a.$guid],a=null}},this.fullHeight=function(a){if("none"!==this.getStyle(a,"display"))return parseFloat(this.getStyle(a,"height"))||a.offsetHeight;this.resetCss(a,{display:"block",visibility:"hidden",position:"absolute"});var b=a.clientHeight||parseFloat(this.getStyle(a,"height"));return this.restoreCss(a),b},this.fullWidth=function(a){if("none"!==this.getStyle(a,"display"))return parseFloat(this.getStyle(a,"width"))||a.offsetWidth;this.resetCss(a,{display:"block",visibility:"hidden",position:"absolute"});var b=a.clientWidth||parseFloat(this.getStyle(a,"width"));return this.restoreCss(a),b},this.addCssRule=function(a){if(c.isArray(a)&&(a=a.join("")),document.styleSheets&&document.styleSheets.length)document.styleSheets[0].insertRule(a,0);else{var b=document.createElement("style");b.innerHTML=a,document.getElementsByTagName("head")[0].appendChild(b)}},this.loadStyle=function(a){var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.href=a;var c=document.getElementsByTagName("head")[0];c.appendChild(b)},this.loadStyleString=function(a){var b=document.createElement("style");b.type="text/css";try{b.appendChild(document.createTextNode(a))}catch(c){b.styleSheet.cssText=a}var d=document.getElementsByTagName("head")[0];d.appendChild(b)},this.loadscript=function(a,b,d,e,f){var g=document.createElement("script");c.isFunction(b)&&(g.onload=g.onreadystatechange=function(){g.readyState&&"loaded"!=g.readyState&&"complete"!=g.readyState||(g.onreadystatechange=g.onload=null,b.apply(this,arguments),e&&this.parentNode.removeChild(this))}),g.setAttribute("charset",d||"UTF-8"),g.type="text/javascript",g.src=a,f=f||document.getElementsByTagName("head")[0]||document.body,f.appendChild(g)},this.loadScriptString=function(a,b,c){var d=document.createElement("script");d.setAttribute("charset",b||"UTF-8"),d.type="text/javascript";try{d.appendChild(document.createTextNode(a))}catch(e){d.text=a}c=c||document.getElementsByTagName("head")[0]||document.body,c.appendChild(d)},this.loadImage=function(a,b,d){var e=new Image;e.src=a;var f=c.isFunction(b),g=c.isFunction(d);return f&&e.complete?(b.call(e),e):(f&&(e.onload=function(){b.call(e)}),g&&(e.onerror=function(){d.call(e)}),e)},this.getPageWidth=function(){return Math.max(b?b.scrollWidth:0,g?g.scrollWidth:0,h?h.clientWidth:0,0)},this.getPageHeight=function(){return Math.max(b?b.scrollHeight:0,g?g.scrollHeight:0,h?h.clientHeight:0,0)},this.getViewWidth=function(){return window.innerWidth||(h?h.clientWidth:0)},this.getViewHeight=function(){return window.innerHeight||(h?h.clientHeight:0)},this.getScrollTop=function(){return window.pageYOffset||b.scrollTop||g.scrollTop||0},this.getScrollLeft=function(){return window.pageXOffset||b.scrollLeft||g.scrollLeft||0},this.getClientTop=function(){return b.clientTop||g.clientTop||0},this.getClientLeft=function(){return b.clientLeft||g.clientLeft||0},this.firstElement=function(a){if(a=this.getElementById(a),a.firstElementChild)return a.firstElementChild;for(var b=a.firstChild;b;b=b.nextSibling)if(1==b.nodeType)return b;return null},this.lastElement=function(a){if(a=this.getElementById(a),a.lastElementChild)return a.lastElementChild;for(var b=a.lastChild;b;b=b.previousSibling)if(1===b.nodeType)return b;return null},this.nextElement=function(a){if(a=this.getElementById(a),a.nextElementSibling)return a.nextElementSibling;for(var b=a.nextSibling;b;b=b.nextSibling)if(1==b.nodeType)return b;return null},this.contains=function(a,b){return a=this.getElementById(a),b=this.getElementById(b),a.contains?a!=b&&a.contains(b):!!(16&a.compareDocumentPosition(b))},this.extractHtmlBySelector=function(a,b){var c=document.createElement("div");c.innerHTML=b;var e=[],f=this.getElements(a,c);if(!this.isOuterHTMLSupported)var g=document.createElement("div");var h=this;return d.each(f,function(a){h.isOuterHTMLSupported?e.push(a.outerHTML):(g.appendChild(a),e.push(g.innerHTML),g.removeChild(a))}),e.join("")},this.iterateDomTree=function(a,b){var c=a.childNodes,d=arguments;c&&f.forEach(c,function(a){b(a),d.callee.call(this,a,b)}),c=d=null},this.setText=function(a,b){"textContent"in a?a.textContent=b:a.innerText=b},this.getText=function(a){return"textContent"in a?a.textContent:a.innerText},this.setValue=function(a,b){a.value=b},this.getValue=function(a){return a.value},this.setHtml=function(a,b){try{a.innerHTML=b}catch(c){this.empty(a);var d,e=document.createElement("div"),g=this.wrapMap[a.nodeName.toLowerCase()];g?(b=g[1]+b+g[2],d=g[0]):(b="<div>"+b+"</div>",d=1),e.innerHTML=b;for(var h=e;d--;)h=h.firstChild;for(;h.childNodes.length;)a.appendChild(h.childNodes[0]);e=h=null}var i=this.getElements("script",a),j=this;f.forEach(i,function(a){a.type&&"text/javascript"!==a.type||(a.src?j.loadscript(a.src,null,"UTF-8",!1,a.parentNode):j.loadScriptString(a.text||a.textContent||a.innerHTML||"","UTF-8",a.parentNode),j.removeNode(a))})},this.getHtml=function(a){return a.innerHTML},this.setAttr=function(a,b,d){c.isFunction(a.setAttribute)?a.setAttribute(b,d):a[b]=d},this.getAttr=function(a,b){return c.isFunction(a.getAttribute)?a.getAttribute(b):a[b]},this.removeAttr=function(a,b){if(c.isFunction(a.removeAttribute))a.removeAttribute(b);else try{delete a[b]}catch(d){a[b]=null}},this.show=function(a){"none"===a.style.display&&(a.style.display="")},this.hide=function(a){"none"!==a.style.display&&(a.style.display="none")},this.setCssText=function(a,b){"cssText"in a.style?a.style.cssText=b:a.setAttribute("style",b)},this.empty=function(a){var b=a.childNodes;if(b&&b.length)for(;b.length;)a.removeChild(b[b.length-1])}}.call(b.prototype),new b}),define("bird.domobserver",["./bird.lang","./bird.array"],function(a){function b(a,b){if(this.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,this.observeMutationSupport=!!MutationObserver,!this.observeMutationSupport)throw new Error("Your browser does not support `MutationObserver`!");this.updateCallbackArray=[];var c=this;this.updateCallback=function(){var a=this;d.forEach(c.updateCallbackArray,function(b){b.apply(a,arguments)})},this._init(a,b)}var c=a("./bird.lang"),d=a("./bird.array");return function(){this._init=function(a,b){this.observer=new this.MutationObserver(this.updateCallback),this.observer.observe(a,b)},this.subscribe=function(a){c.isFunction(a)&&this.updateCallbackArray.push(a)},this.unsubscribe=function(a){return arguments.length?void d.forEach(this.updateCallbackArray,function(b,c,d){b===a&&d.splice(c,1)}):(this.updateCallbackArray.length=0,void this.observer.disconnect())},this.watch=this.subscribe,this.unwatch=this.unsubscribe,this.clear=function(){this.observer.takeRecords()}}.call(b.prototype),b}),define("bird.event",["./bird.lang","./bird.object","./bird.util","./bird.array","./bird.dom"],function(a){function b(a){this.originalEvent=a,this.init()}function c(){this.eventCache={}}var d=a("./bird.lang"),e=a("./bird.object"),f=a("./bird.util"),g=a("./bird.array"),h=a("./bird.dom");return function(){function a(){return!0}function b(){return!1}this.init=function(){var a=this.originalEvent,b=this,c=["type","altKey","ctrlKey","shiftKey","metaKey","fromElement","toElement","charCode","keyCode","clientX","clientY","offsetX","offsetY","screenX","screenY","defaultPrevented","bubbles","cancelBubble","cancelable","path","clipboardData","eventPhase","returnValue","changedTouches","targetTouches","touches","propertyName","state","srcElement","currentTarget","timeStamp","target","relatedTarget","pageX","pageY","which","button","data","origin","source"];if(g.forEach(c,function(c){b[c]=a[c]}),this.timeStamp=this.timeStamp||(new Date).getTime(),"error"===this.type){var d=window.event||{};this.lineno=a.lineno||d.errorLine,this.colno=a.colno||d.errorCharacter,this.filename=a.filename||d.errorUrl,this.message=a.message||d.errorMessage,this.error=a.error}this.target=this.target||this.srcElement||document,3===this.target.nodeType&&(this.target=this.target.parentNode),this.metaKey=!!a.metaKey,null==this.which&&(this.which=null!=a.charCode?a.charCode:a.keyCode);var e,f,h,i=a.button,j=a.fromElement;null==this.pageX&&null!=a.clientX&&(f=this.target.ownerDocument||document,h=f.documentElement,e=f.body,this.pageX=a.clientX+(h&&h.scrollLeft||e&&e.scrollLeft||0)-(h&&h.clientLeft||e&&e.clientLeft||0),this.pageY=a.clientY+(h&&h.scrollTop||e&&e.scrollTop||0)-(h&&h.clientTop||e&&e.clientTop||0)),!this.relatedTarget&&j&&(this.relatedTarget=j===this.target?a.toElement:j),this.which||void 0===i||(this.which=1&i?1:2&i?3:4&i?2:0),this.isMouseLeft=1===this.which,this.isMouseRight=3===this.which,this.isMouseMiddle=2===this.which},this.isDefaultPrevented=b,this.isPropagationStopped=b,this.isImmediatePropagationStopped=b,this.preventDefault=function(){var b=this.originalEvent;this.isDefaultPrevented=a,b&&(b.preventDefault?b.preventDefault():b.returnValue=!1)},this.stopPropagation=function(){var b=this.originalEvent;this.isPropagationStopped=a,b&&(b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0)},this.stopImmediatePropagation=function(){var b=this.originalEvent;this.isImmediatePropagationStopped=a,b&&b.stopImmediatePropagation&&b.stopImmediatePropagation(),this.stopPropagation()}}.call(b.prototype),function(){function a(a,b,c){var d=/^(?:focus|blur)$/i.test(b);a.removeEventListener?a.removeEventListener(b,c.callback,d):a.detachEvent("on"+b,c.callback),delete c.callback}function c(a,b,c){var d={handle:c,eventType:b};return"change"===b?n?(/^input$/i.test(a.tagName)&&!/^(?:checkbox|radio|hidden|button|file)$/i.test(a.type)||/^textarea$/i.test(a.tagName))&&(d.eventType=l.level3[b]):a.addEventListener?d.eventType=l.level1[b]:(d.eventType=l.level2[b],(/^input$/i.test(a.tagName)&&/^(?:checkbox|radio)$/i.test(a.type)||/^select$/i.test(a.tagName))&&(d.eventType="click"),"propertychange"===d.eventType&&(d.handle=function(){return c.apply(this,arguments)},d.handle.elem=c.elem,d.handle.selector=c.selector,d.handle.needsContext=c.needsContext,delete c.elem,delete c.selector,delete c.needsContext)):a.attachEvent&&l.level2[b]&&(d.eventType=l.level2[b]),d}function i(a,b,c){var d,e,f,g,h;for(b.delegateTarget=a,d=0;(g=c[d++])&&!b.isPropagationStopped();)for(b.currentTarget=g.elem,h=0;(f=g.handlers[h++])&&!b.isImmediatePropagationStopped();)e=f.call(g.elem,b),void 0!==e&&(b.result=e)===!1&&(b.preventDefault(),b.stopPropagation());return b.result}function j(a,b,c){var d,e,f,g,i=[],j=c.delegateCount,k=b.target;if(j&&k.nodeType&&(!b.button||"click"!==b.type))for(;k!=a;k=k.parentNode||a)if(1===k.nodeType&&(k.disabled!==!0||"click"!==b.type)){for(f=[],g=0;j>g;g++)e=c[g],d=e.selector+" ",void 0===f[d]&&(f[d]=e.needsContext?h.index(k,h.getAll(d,a))>=0:h.getAll(d,a,[k]).length),f[d]&&f.push(e);f.length&&i.push({elem:k,handlers:f})}return j<c.length&&i.push({elem:a,handlers:c.slice(j)}),i}var k=document;this.addListener=function(a,b,d){var e=c(a,b,d);b=e.eventType,d=e.handle,e=null;var f=this;g.forEach(b.split(/\s+/),function(b){f._addListener(a,b,d)})},this.removeListener=function(a,b,c){var d=this;return b?void g.forEach(b.split(/\s+/),function(b){d._removeListener(a,b,c)}):this._removeListener(a)},this.on=this.bind=this.addListener,this.off=this.unbind=this.removeListener,this.once=function(a,b,c){var d=this,e=function(b){d.removeListener(a,b.type,e),c.call(this,b)};this.addListener(a,b,e)},this._addListener=function(a,c,d){a.__uid__||(a.__uid__=f.uuid("el_"));var e,g=this.eventCache[a.__uid__]=this.eventCache[a.__uid__]||{},h=g[c]=g[c]||{};if((e=h.queue)||(e=h.queue=[],e.delegateCount=0),d.selector?e.splice(e.delegateCount++,0,d):e.push(d),!h.callback&&(a.addEventListener||a.attachEvent)){var i=this,j=function(c){var d=window.event;c=c||d;var e=new b(c);i.trigger(a,e)},k=/^(?:focus|blur)$/i.test(c);h.callback=j,a.addEventListener?a.addEventListener(c,j,k):a.attachEvent("on"+c,j),j=null}},this._removeListener=function(b,c,d){if(b.__uid__){var e=this.eventCache[b.__uid__];if(e){var f=e[c];if(f){var h=f.queue;if(h&&h.length){if(d)return g.descArrayEach(h,function(a,b,c){a===d&&(c.splice(b,1),d.selector&&h.delegateCount--)}),void(h.length||(a(b,c,f),h.delegateCount=0));h.length=0,h.delegateCount=0,a(b,c,f)}}}}},this.trigger=function(a,b){if(a.__uid__){var c=this.eventCache[a.__uid__];if(c){var d,f=b.type;if(f){var g=c[f];if(!g)return;var h=g.queue;if(!h||!h.length)return;return d=j(a,b,h),void i(a,b,d)}e.forEach(c,function(c){c&&c.queue&&(d=j(a,b,h),i(a,b,d))})}}};var l={level1:{change:"keyup paste cut"},level2:{change:"propertychange",focus:"focusin",blur:"focusout"},level3:{change:"input"}},m=document.createElement("input"),n="oninput"in m&&(!("documentMode"in document)||document.documentMode>9),o="[\\x20\\t\\r\\n\\f]",p=new RegExp("^"+o+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+o+"*((?:-\\d)?\\d*)"+o+"*\\)|)(?=[^-]|$)","i");this.delegate=function(a,b,c,e){if(d.isString(a)){e=e||k;var f=c;c=function(a){return f.call(a.target,a)},c.elem=e,c.selector=a,c.needsContext=a&&p.test(a),this.addListener(e,b,c),c=null}},this.destroy=function(b){if(b.__uid__){var c=this.eventCache[b.__uid__];try{delete b.__uid__}catch(d){b.__uid__=null}c&&e.forEach(c,function(c,d){var e=c.queue;e.length=0,delete e.delegateCount,e=null,a(b,d,c)})}},this.isHtmlEventType=function(){var a={};return f.each(["click","dblclick","mouseover","mouseout","mousemove","mouseenter","mouseleave","mouseup","mousedown","mousewheel","keypress","keydown","keyup","load","unload","beforeunload","abort","error","move","resize","scroll","stop","hashchange","blur","change","focus","reset","submit","start","finish","bounce","contextmenu","drag","dragdrop","dragend","dragenter","dragleave","dragover","dragstart","propertychange","readystatechange","input","popstate","beforeprint","afterprint","help","select","selectstart","copy","cut","paste","losecapture","beforecopy","beforecut","beforeeditfocus","beforepaste","beforeupdate","touchstart","touchmove","touchend","message"],function(b){a[b]=1}),function(b){return a[b]}}()}.call(c.prototype),new c}),define("bird.lang",["./bird.logger"],function(a){function b(){}var c=a("./bird.logger");return function(){function a(){}var b=Math.pow(2,53)-1;this.getType=function(a){return"undefined"==typeof a?"Undefined":null===a?"Null":Object.prototype.toString.call(a).slice(8,-1)},this.isUndefined=function(a){return"undefined"==typeof a},this.isNull=function(a){return null===a},this.isUndefinedOrNull=function(a){return null==a},this.isNullOrUndefined=function(a){return null==a},this.isString=function(a){return"String"===this.getType(a)},this.isNumber=function(a){return"Number"===this.getType(a)},this.isNaN=function(a){return this.isNumber(a)&&a!==+a},this.isInteger=function(a){return this.isNumber(a)&&/^-?\d+$/.test(a)},this.isFloat=function(a){return this.isNumber(a)&&/^-?\d*\.\d+$/.test(a)},this.isBoolean=function(a){return"Boolean"===this.getType(a)},this.isRegExp=function(a){return"RegExp"===this.getType(a)},this.isArray=function(a){return Array.isArray?Array.isArray(a):"Array"===this.getType(a)},this.isDate=function(a){return"Date"===this.getType(a)},this.isObject=function(a){return"object"==typeof a&&null!==a},this.isPlainObject=function(a){return"Object"===this.getType(a)};var d;for(d in new a)break;var e=void 0!==d,f=Object.prototype.hasOwnProperty;this.isRawObject=function(a){var b;if(!a||"Object"!==this.getType(a)||a.nodeType||this.isWindow(a))return!1;try{if(a.constructor&&!f.call(a,"constructor")&&!f.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(e)for(b in a)return f.call(a,b);for(b in a);return void 0===b||f.call(a,b)},this.isWindow=function(a){return null!=a&&a==a.window},this.isHtmlDocument=function(a){return a===document},this.isHtmlNode=function(a){return a&&a.nodeType},this.isHtmlElement=function(a){return a&&1===a.nodeType},this.isHtmlAttribute=function(a){return a&&2===a.nodeType},this.isHtmlText=function(a){return a&&3===a.nodeType},this.isHtmlComment=function(a){return a&&8===a.nodeType},this.isFunction=function(a){return"function"==typeof a},this.isNativeFunction=function(a){if(!this.isFunction(a))return!1;var b=/^\s*function\s+[a-zA-Z]*\s*\(\s*[a-zA-Z]*\s*\)\s*\{\s*\[native code\]\s*\}\s*$/;return b.test(a.toString())&&(this.isUndefined(a.prototype)||a.prototype.constructor===a)},this.isArrayLike=function(a){var c=a&&a.length;return"number"==typeof c&&c>=0&&b>=c},this.isNotEmpty=function(a){if(this.isNullOrUndefined(a)||""===a)return!1;if(this.isArray(a)&&0===a.length)return!1;if(this.isPlainObject(a)){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1}return!0},this.getVariableInContext=function(a,b){if(!this.isObject(b))return c.warn("Parameter `ctx` of `lang.getVariableInContext(s, ctx)` is not an object."),null;if(-1===a.indexOf("."))return b[a];for(var d=a.split("."),e=0,f=d.length;f>e;e++){var g=b[d[e]];if(null==g&&e!==f-1)return void c.warn("Variable: `"+d.slice(0,e+1).join(".")+"` has no value.");b=g}return b},this.setVariableInContext=function(a,b,d){if(!this.isObject(d))return c.warn("Parameter `ctx` of `lang.setVariableInContext(s, value, ctx)` is not an object."),null;var e=a.lastIndexOf(".");if(-1===e)return d[a]=b;var f=this.getObjectInContext(a.substring(0,e),d);return f[a.substring(e+1,a.length)]=b},this.getGlobalVariable=function(a){return this.getVariableInContext(a,window)},this.getGlobalObject=function(a){return this.getObjectInContext(a,window)},this.getObjectInContext=function(a,b){if(-1===a.indexOf("."))return b[a]||(b[a]={});for(var c=a.split("."),d=0,e=c.length;e>d;d++){var f=c[d],g=b[f]||(b[f]={});b=g}return b},this.now=function(){return Date.now?Date.now():(new Date).getTime()},this.debounce=function(a,b,c){var d,e,f,g,h,i=this,j=function(){var k=i.now()-g;b>k&&k>=0?d=setTimeout(j,b-k):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=i.now();var k=c&&!d;return d||(d=setTimeout(j,b)),k&&(h=a.apply(f,e),f=e=null),h}},this.noop=a,this.nextTick=window.setImmediate?setImmediate.bind(window):function(a){setTimeout(a,0)},this.bind=function(a,b){return function(c){var d=arguments.length;return d?d>1?a.apply(b,arguments):a.call(b,c):a.call(b)}}}.call(b.prototype),new b}),define("bird.logger",[],function(a){function b(){var a=document.createElement("div");a.style.position="absolute",a.style.top="0px",a.style.padding="10px",a.style.backgroundColor="#eee",a.style.filter="alpha(opacity=80)",a.style.border="dotted 2px red",a.style.color="black",a.zIndex=999999999,document.body.appendChild(a),this.contentDiv=a,a=null}function c(a){return"undefined"==typeof a?"Undefined":null===a?"Null":Object.prototype.toString.call(a).slice(8,-1)}function d(a){return Array.isArray?Array.isArray(a):"Array"===c(a)}function e(a){return"Object"===c(a)}function f(){this.level="INFO"}"undefined"==typeof window.console&&(function(){this.log=function(a,b){var c;if(e(a)||d(a))c=JSON.stringify(a);else{var f=a.split("%c"),g=[],h=arguments;util.forEach(f,function(a,b,c){!b&&a?g.push(a):g.push('<span style="'+h[b]+'">',a,"</span>")}),c=g.join("")}var i=document.createElement("div");i.innerHTML=c,this.contentDiv.appendChild(i),i=h=null},this.dir=this.info=this.warn=this.error=this.log}.call(b.prototype),window.console=new b);var g={INFO:1,WARN:2,ERROR:3,FATAL:4};return function(){this.setLevel=function(a){this.level=a},this.setDefaultLevel=function(){this.level="INFO"},this.info=function(){g[this.level]<2&&console.log.apply(console,arguments)},this.log=this.info,this.warn=function(){g[this.level]<3&&console.warn.apply(console,arguments)},this.error=function(){g[this.level]<4&&console.error.apply(console,arguments)},this.dir=function(){g[this.level]<2&&console.dir.apply(console,arguments)}}.call(f.prototype),new f}),define("bird.lrucache",["./bird.__lrucache__"],function(a){var b=a("./bird.__lrucache__");return new b}),define("bird.object",["./bird.lang","./bird.array"],function(a){function b(){}var c=a("./bird.lang"),d=a("./bird.array");return function(){var a=!{toString:null}.propertyIsEnumerable("toString");this.each=function(a,b,d){if(c.isPlainObject(a)&&c.isUndefined(a.length)){for(var e in a)if((d||a.hasOwnProperty(e))&&b.call(this,a[e],e,a)===!1)return!1;return!0}for(var f=Number(a.length)||0,e=0;f>e;e++)if((d||a.hasOwnProperty(e))&&b.call(this,a[e],e,a)===!1)return!1;return!0},this.forEach=function(a,b,d){if(c.isPlainObject(a)&&c.isUndefined(a.length))for(var e in a)(d||a.hasOwnProperty(e))&&b.call(this,a[e],e,a);else for(var f=Number(a.length)||0,e=0;f>e;e++)(d||a.hasOwnProperty(e))&&b.call(this,a[e],e,a)},this.extend=function(a,b){if(arguments.length<2)return a;if(2===arguments.length)return this.forEach(b,function(b,c){a[c]=b}),a;var c,d;for(c=1,d=arguments.length;d>c;c++)this.forEach(arguments[c],function(b,c){a[c]=b});return a},this.cover=function(a,b){return arguments.length<2?a:2===arguments.length?(this.forEach(a,function(c,d){d in b&&(a[d]=b[d])}),a):a},this.clone=function(a,b){var e,f,g,h;if(c.isPlainObject(a))e={},f=this.forEach,h=!0;else{if(!c.isArray(a))return a;e=[],f=d.forEach,g=!0}var i=this;return f(a,function(a,f){if(b)if(c.isPlainObject(a))a=i.clone(a,b);else if(c.isArray(a)){var j=[];d.forEach(a,function(a){j.push(i.clone(a,b))}),a=j}h?e[f]=a:g&&e.push(a)}),e},this.jsonToQuery=function(a,b){if(c.isString(a))return a;b=b||",";var d=[],e=this;if(c.isPlainObject(a)){for(var f in a)if(a.hasOwnProperty(f)){var g=a[f];c.isPlainObject(g)?d.push(f+"="+encodeURIComponent(arguments.callee.call(this,g))):c.isArray(g)?d.push(f+"="+encodeURIComponent(arguments.callee.call(this,g))):(c.isString(g)||c.isNumber(g))&&d.push(f+"="+g)}return d.join("&")}if(c.isArray(a)){var h=arguments;return this.each(a,function(a){c.isString(a)||c.isNumber(a)?d.push(a):(c.isPlainObject(a)||c.isArray(a))&&d.push(h.callee.call(e,a))}),d.join(b)}},this.keys=function(b){if(!c.isObject(b))return[];if(Object.keys)return Object.keys(b);var d="propertyIsEnumerable,isPrototypeOf,hasOwnProperty,toLocaleString,toString,valueOf,constructor".split(","),e=[];for(var f in b)b.hasOwnProperty(f)&&e.push(f);if(a&&b)for(var g=0;f=d[g++];)b.hasOwnProperty(f)&&e.push(f);return e},this.filter=function(a,b){if(c.isFunction(b)){var d={};return this.forEach(a,function(a,c,e){b(a,c,e)&&(d[c]=a)}),d}},this.create=function(a,b){var d;if(c.isObject(a))if(Object.create)d=Object.create(a);else{var e=new Function;e.prototype=a,d=new e}else d={};if(c.isPlainObject(b))for(var f in b)b.hasOwnProperty(f)&&(d[f]=b);return d},this.values=function(a){for(var b=this.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},this.pairs=function(a){for(var b=this.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},this.invert=function(a){for(var b={},c=this.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b}}.call(b.prototype),new b}),define("bird.observer",["./bird.__observer__"],function(a){var b=a("./bird.__observer__");return new b}),define("bird.random",[],function(a){function b(){}return function(){this.randomFromArray=function(a,b){for(var c=[],d=[],e=0;e<b.length;e++)c[e]=e;for(;a--;){var f=this.randomIntegerBetween(0,c.length-1);d.push(b[c[f]]),c.splice(f,1)}return d},this.randomIntegerBetween=function(a,b){return Math.floor((b-a+1)*Math.random())+a},this.randomBetween=function(a,b){return(b-a)*Math.random()+a}}.call(b.prototype),new b}),define("bird.request",["./bird.dom","./bird.lang","./bird.array","./bird.string","./bird.util","./bird.object","./bird.date","./bird.logger"],function(a){function b(){}var c=a("./bird.dom"),d=a("./bird.lang"),e=a("./bird.array"),f=(a("./bird.string"),a("./bird.util"),a("./bird.object")),g=a("./bird.date"),h=a("./bird.logger");return function(){function a(a){j.length&&e.forEach(j,function(b){d.isFunction(b.request)&&b.request(a)})}function b(a,b){return j.length&&d.isNotEmpty(a)&&e.forEach(j,function(c){if(d.isFunction(c.response)){var e=c.response(a,b);d.isUndefinedOrNull(e)||(a=e)}}),a}var i=document,j=[];this.addInterceptor=function(a){d.isPlainObject(a)&&j.push(a)},this.ajax=function(c){if(!c.crossDomain){var e=/^((?:http|https)\:)\/{2}([^\/?#~!|&@=%^$*+]+)/i,g=e.exec(c.url);g&&g.length&&(window.location.protocol===g[1].toLowerCase()&&window.location.host===g[2].toLowerCase()||(c.crossDomain=!0))}var i,j;if(window.XMLHttpRequest?(i=new XMLHttpRequest,!c.crossDomain||"withCredentials"in i||(i=null)):c.crossDomain?d.isUndefined(window.XDomainRequest)||(i=new XDomainRequest):window.ActiveObject&&(i=new ActiveXObject("Microsoft.XMLHTTP")),!i)return void h.warn("Your browser not support"+(c.crossDomain?" CrossDomain ":" ")+"XmlHttpRequest!");var k={async:!0,requestType:"get",responseType:""};f.extend(k,c),a(k),i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){if(d.isFunction(k.complete)){var a;/^xml$/i.test(k.responseType)?(a=b(this.responseXML,k),k.complete(a,this.status)):(a=this.response||this.responseText,d.isString(a)&&/^json$/i.test(k.responseType)&&(a="undefined"!=typeof JSON&&d.isFunction(JSON.parse)?JSON.parse(a):new Function("return ("+a+")")()),a=b(a,k),k.complete(a,this.status))}}else d.isFunction(k.error)&&k.error(i.statusText,i.status)},j=-1===k.url.indexOf("?")?"?":"&",k.data=k.data&&f.jsonToQuery(k.data),/^(?:head|get|delete)$/i.test(k.requestType)&&(k.data&&(k.url+=j+k.data),k.data=null),i.open(k.requestType,k.url,k.async),/^xml$/i.test(k.responseType)&&i.overrideMimeType("application/xml");try{i.responseType=k.responseType}catch(l){}return/^(?:post|put|patch)$/i.test(k.requestType)&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(k.data),i},this.post=function(a,b,c,d){var e={url:a,data:b,requestType:"post",responseType:"json",complete:c,error:d};return this.ajax(e)},this.get=function(a,b,c,e){d.isFunction(b)&&(d.isFunction(c)&&(e=c),c=b,b=null);var f={url:a,data:b,requestType:"get",responseType:"json",complete:c,error:e};return this.ajax(f)},this.load=function(a,b,e,f,g){d.isFunction(b)&&(error=e,e=b,b=null);var h={url:a,requestType:"get",responseType:"text",async:d.isUndefinedOrNull(g)?!0:!!g,complete:function(a){if(b){var f=c.extractHtmlBySelector(b,a);d.isFunction(e)&&e(f)}else d.isFunction(e)&&e(a)},error:f};return this.ajax(h)},this.abort=function(a){a&&a.abort()},this.syncLoad=function(a,b,c,d){return this.load(a,b,c,d,!1)},this.jsonp=function(a,b,c){d.isFunction(b)&&(c=b,b=null);var e,f,h="jsonp"+g.now();a=a+(/\?/.test(a)?"&":"?")+(b||"callback")+"="+h,window[h]=function(a){f.removeChild(e),e=null,f=null;try{delete window[h]}catch(b){window[h]=null}c(a)},e=i.createElement("script"),e.setAttribute("src",a),f=i.getElementsByTagName("head")[0]||i.getElementsByTagName("body")[0],f.appendChild(e)},this.imageGet=function(a,b,d){a+=(-1!==a.indexOf("?")?"&":"?")+"_t="+(new Date).getTime(),
c.loadImage(a,b,d)}}.call(b.prototype),new b}),define("bird.requestframe",[],function(a){function b(){}return!window.requestAnimationFrame&&(window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)}}()),!window.cancelAnimationFrame&&(window.cancelAnimationFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(a){window.clearTimeout(a)}}()),function(){this.requestAFrame=function(a){return window.requestAnimationFrame(a)},this.cancelAFrame=function(a){window.cancelAnimationFrame(a)},this.now=function(){return Date.now?Date.now():(new Date).getTime()}}.call(b.prototype),new b}),define("bird.sessionstorage",[],function(){function a(){this.isSessionStorageSupported=!!window.sessionStorage,this.isSessionStorageSupported||(this.expires=0)}return function(){this.setItem=function(a,b){this.isSessionStorageSupported&&sessionStorage.setItem(a,b)},this.getItem=function(a){return this.isSessionStorageSupported?sessionStorage.getItem(a):void 0},this.removeItem=function(a){this.isSessionStorageSupported&&sessionStorage.removeItem(a)}}.call(a.prototype),new a}),define("bird.spirit",["./bird.requestframe"],function(a){function b(){}var c=a("./bird.requestframe");return function(){function a(a,b){this.elem=a,this.bgPos=b.backgroundPosition||b["background-position"],this.count=b.count||-1,this.picNumber=b.picNumber}a.prototype={init:function(){var a=/\s*([\+|-])=\s*(-?[0-9\.]+)px\s+([\+|-])=\s*(-?[0-9\.]+)px/.exec(this.bgPos);this._x_calcu=a[1],this._x=Number(a[2]),this._y_calcu=a[3],this._y=Number(a[4]);var b=/\s*(-?[0-9\.]+)px\s+(-?[0-9\.]+)px/.exec(this.elem.style.backgroundPosition);this.x=Number(b[1]),this.y=Number(b[2]),a=b=null},start:function(){this.init();var a=0,b=0,d=this;return this.intervalFn=function(){d.timerId=c.requestAFrame(function(){d.timerId=c.requestAFrame(arguments.callee),b===d.picNumber&&(a<d.count||-1===d.count?b=-1:timerId&&(c.cancelAFrame(d.timerId),d.timerId=null)),++b,d.elem.style.backgroundPosition=("+"===d._x_calcu?d.x+d._x*b:d.x-d._x*b)+"px "+("+"===d._y_calcu?d.y+d._y*b:d.y-d._y*b)+"px",a++})},this.intervalFn(),this},pause:function(){this.timerId&&(c.cancelAFrame(this.timerId),this.timerId=null)},resume:function(){!this.timerId&&this.intervalFn&&this.intervalFn()}},this.spirit=function(b,c){return new a(b,c).start()}}.call(b.prototype),new b}),define("bird.storage",[],function(){function a(){this.isLocalStorageSupported=!!window.localStorage,this.isLocalStorageSupported||(this.dataDom=null,this.name=location.hostname||"mockLocalStorage")}return function(){this._init=function(){if(!this.dataDom)try{this.dataDom=document.createElement("INPUT"),this.dataDom.type="hidden",this.dataDom.style.display="none",this.dataDom.addBehavior("#default#userData"),document.body.appendChild(this.dataDom);var a=new Date;a.setDate(a.getDate()+365),this.dataDom.expires=a.toUTCString()}catch(b){return!1}return!0},this.setItem=function(a,b){this.isLocalStorageSupported?localStorage.setItem(a,b):this._init()&&(this.dataDom.load(this.name),this.dataDom.setAttribute(a,b),this.dataDom.save(this.name))},this.getItem=function(a){return this.isLocalStorageSupported?localStorage.getItem(a):this._init()?(this.dataDom.load(this.name),this.dataDom.getAttribute(a)):void 0},this.removeItem=function(a){this.isLocalStorageSupported?localStorage.removeItem(a):this._init()&&(this.dataDom.load(this.name),this.dataDom.removeAttribute(a),this.dataDom.save(this.name))}}.call(a.prototype),new a}),define("bird.string",[],function(a){function b(){}return function(){function a(a,b){var c=a.length;b[0]=0;for(var d=1,e=0;c>d;d++){for(;a.charAt(d)!=a.charAt(e)&&e>0;)e=b[e];a.charAt(d)==a.charAt(e)&&e++,b[d]=e}}var b=/^\w/,c=/(.)\1+/g,d=/(?:<[a-zA-Z]+\d*(?:\s+[^>]+\s*)*>)|(?:<\/[a-zA-Z]+\d*>)|(?:<[a-zA-Z]+\d*(?:\s+[^>]+\s*)*\/\s*>)/g,e=/^[\s\xa0\u3000]+|[\u3000\xa0\s]+$/g,f=/-([a-z])/gi,g=/\{\{(.+?)\}\}/g,h=/(<[a-zA-Z]+\d*\s*[^>]*\/?>)[\s\xa0\u3000]+|(<\/[a-zA-Z]+\d*>)[\s\xa0\u3000]+|[\s\xa0\u3000]+(<[a-zA-Z]+\d*\s*[^>]*\/?>)|[\s\xa0\u3000]+(<\/[a-zA-Z]+\d*>)/g,i=/(['"])(.*)\1/,j=/<!--(?:.|\r|\n)*?-->/g;this.capitalize=function(a){return a.replace(b,function(a){return a.toUpperCase()})},this.removeDuplicateChar=function(a){return a.replace(c,"$1")},this.removeBothEndQuotes=function(a){return a.replace(i,"$2")},this.removeHtmlTags=function(a){return a.replace(d,"")},this.removeSpaceBetweenTags=function(a){return a.replace(h,function(a,b,c,d,e){return b||c||d||e||""})},this.removeHtmlComments=function(a){return a.replace(j,"")},this.trim=function(a){return a.replace(e,"")},this.equalsIgnoreCase=function(a,b){return a.toLowerCase()===b.toLowerCase()},this.camelize=function(a){return a.replace(f,function(a,b){return b.toUpperCase()})},this.escapeRegExp=function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},this.format=function(a,b,c){return a?null==b?a:a.replace(g,function(a,d){var e=b[d];return"function"==typeof e&&(e=e(d)),"function"==typeof c&&c(d,b),null==e?"":e}):""},this.startWith=function(a,b,c){return a.length<b.length?!1:(c&&(a=a.toLowerCase(),b=b.toLowerCase()),0===a.indexOf(b))},this.endWith=function(a,b,c){return a.length<b.length?!1:(c&&(a=a.toLowerCase(),b=b.toLowerCase()),a.lastIndexOf(b)===a.length-b.length)},this.search=function(b,c){var d=b.length,e=c.length,f=[];a(c,f);for(var g=0,h=0;d>g;g++)if(b.charAt(g)==c.charAt(h)){if(h++,h==e)return g-e+1}else h=f[h];return-1},this.encodeHTML=function(a){return a+="",a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}}.call(b.prototype),new b}),define("bird.syspatch",["./bird.util"],function(a){var b=a("./bird.util"),c=window;"undefined"==typeof c.JSON&&(c.JSON={parse:function(a){return new Function("return ("+a+")")()},stringify:b.stringify}),!Function.prototype.bind&&(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a||window,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e})}),define("bird.template",["./bird.dom"],function(a){function b(){}return function(){var b=a("./bird.dom");this.template=function(a,c){var d=b.getElement("#"+a),e=d.innerHTML;return this.fillTemplate(e,c)},this.fillTemplate=function(a,b){var c={evaluate:/<%([\s\S]+?)%>/g,interpolate:/\{\{([\s\S]+?)\}\}/g},d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.interpolate,function(a,b){return"',"+b.replace(/\\'/g,"'")+",'"}).replace(c.evaluate||null,function(a,b){return"');"+b.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj",d);return b?e(b):e}}.call(b.prototype),new b}),define("bird.tween",[],function(a){return{linear:function(a,b,c,d){return c*a/d+b},sineBoth:function(a,b,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+b},easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeBoth:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInStrong:function(a,b,c,d){return c*(a/=d)*a*a*a+b},easeOutStrong:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},easeBothStrong:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},elasticIn:function(a,b,c,d,e,f){if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return-(e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f))+b},elasticOut:function(a,b,c,d,e,f){if(0==a)return b;if(1==(a/=d))return b+c;if(f||(f=.3*d),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return e*Math.pow(2,-10*a)*Math.sin(2*(a*d-g)*Math.PI/f)+c+b},elasticBoth:function(a,b,c,d,e,f){if(0==a)return b;if(2==(a/=d/2))return b+c;if(f||(f=.3*d*1.5),!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return 1>a?-.5*e*Math.pow(2,10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)+b:e*Math.pow(2,-10*(a-=1))*Math.sin(2*(a*d-g)*Math.PI/f)*.5+c+b},backIn:function(a,b,c,d,e){return"undefined"==typeof e&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},backOut:function(a,b,c,d,e){return"undefined"==typeof e&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},backBoth:function(a,b,c,d,e){return"undefined"==typeof e&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},bounceIn:function(a,b,c,d){return c-Tween.bounceOut(d-a,0,c,d)+b},bounceOut:function(a,b,c,d){return(a/=d)<1/2.75?7.5625*c*a*a+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},bounceBoth:function(a,b,c,d){return d/2>a?.5*Tween.bounceIn(2*a,0,c,d)+b:.5*Tween.bounceOut(2*a-d,0,c,d)+.5*c+b}}}),define("bird.util",["./bird.object","./bird.array","./bird.lang","./bird.string","./bird.uuid"],function(a){function b(){}var c=a("./bird.object"),d=a("./bird.array"),e=a("./bird.lang"),f=a("./bird.string"),g=a("./bird.uuid");return function(){this.each=function(a,b,f){return e.isArray(a)?d.each(a,b,f):c.each(a,b,f)},this.forEach=function(a,b,f){e.isArray(a)?d.forEach(a,b,f):c.forEach(a,b,f)},this.uuid=function(a){var b=g.uuid(8);return a?a+b:b},this.stringify=function(a){var b=e.isArray(a),c=[b?"[":"{"],d=arguments,g=this;return this.forEach(a,function(a,h,i){if(b||c.push(h,":"),e.isArray(a)||e.isPlainObject(a))c.push(d.callee.call(g,a));else if(e.isDate(a))c.push('"',a.toLocaleString(),'"');else{var j=e.isString(a)||e.isNumber(a);j&&c.push('"'),c.push(f.trim(a)),j&&c.push('"')}c.push(",")}),c.pop(),c.push(b?"]":"}"),c.join("")}}.call(b.prototype),new b}),define("bird.uuid",[],function(a){function b(){}var c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(){this.uuid=function(a,b){var d,e=c,f=[];if(b=b||e.length,a)for(d=0;a>d;d++)f[d]=e[0|Math.random()*b];else{var g;for(f[8]=f[13]=f[18]=f[23]="-",f[14]="4",d=0;36>d;d++)f[d]||(g=0|16*Math.random(),f[d]=e[19==d?3&g|8:g])}return f.join("")},this.uuidFast=function(){for(var a,b=c,d=new Array(36),e=0,f=0;36>f;f++)8==f||13==f||18==f||23==f?d[f]="-":14==f?d[f]="4":(2>=e&&(e=33554432+16777216*Math.random()|0),a=15&e,e>>=4,d[f]=b[19==f?3&a|8:a]);return d.join("")},this.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})}}.call(b.prototype),new b}),define("bird.action",["bird.object","bird.lang","bird.dom","bird.string","bird.array","bird.util","bird.request","./bird.model","./bird.databind","./bird.requesthelper","./bird.validator","bird.__lrucache__","bird.router","bird.observer"],function(a){function b(){this.id=h.uuid("action_"),this.model=new j,this.dataBind=new k,this.dataBinds=[],this.requestHelper=new l,this.lruCache=new n,this.args={},this.lifePhase=this.LifeCycle.NEW}var c=a("bird.object"),d=a("bird.lang"),e=a("bird.dom"),f=a("bird.string"),g=a("bird.array"),h=a("bird.util"),i=a("bird.request"),j=a("./bird.model"),k=a("./bird.databind"),l=a("./bird.requesthelper"),m=a("./bird.validator"),n=a("bird.__lrucache__"),o=a("bird.router"),p=a("bird.observer");return b.setContainer=function(a){b.prototype.container=d.isString(a)?document.getElementById(a):a},function(){this.LifeCycle={NEW:0,INITED:1,MODEL_INITED:2,RENDERED:3,EVENT_BOUND:4,DESTROYED:5},this.tpl="",this.name="",this.container=document.getElementById("wrapper"),this.init=function(){this.requestUrl||(this.requestUrl={}),this.requestUrlWhenEnter||(this.requestUrlWhenEnter={}),c.extend(this.requestUrl,this.requestUrlWhenEnter),this.requestUrl.resource||(this.requestUrl.resource="/api/"+this.name),this.requestHelper.generateRequestMethods(this.requestUrl,this.name),this.lifePhase=this.LifeCycle.INITED},this._requestData=function(a){var b=this;this.promise={isListening:!1,requestCount:0,callback:a,callCallback:function(){!this.requestCount&&this.isListening&&this.callback()},listen:function(){this.isListening=!0,this.callCallback()}},d.isNotEmpty(this.requestUrlWhenEnter)&&c.forEach(this.requestUrlWhenEnter,function(a,c){var d=a.split(/\s+/),e=d&&d[0],g=d&&d[1];/\{\{[^{}]+\}\}/.test(g)&&(g=f.format(g,b.args)),i.ajax({url:g,requestType:e,responseType:"json",data:b.args&&b.args.param,complete:function(a){a=a&&a.result||a||{},b.model.set(g,a),b.promise.requestCount--,b.promise.callCallback()},error:function(){b.promise.requestCount--,b.promise.callCallback()}}),b.promise.requestCount++})},this.initModel=d.noop,this._initModel=function(){try{this.initModel(this.model,this.model.watcher,this.requestHelper,this.args,this.lruCache)}catch(a){if(p.notify("errorCapture",{action:this.name,method:"initModel",originalError:a}),window.DEBUG)throw a}this.lifePhase=this.LifeCycle.MODEL_INITED},this._applyBind=function(){return this.tpl?(this.dataBind.parseTpl(this.tpl),e.setHtml(this.container,this.dataBind.fillTpl(this.model,this.id)),void this.dataBind.bind(this.model,this.dataBinds,this.id)):void e.empty(this.container)},this.applyBind=function(a,b,c){if(a&&b){var f=new k;this.dataBinds.push(f),f.parseTpl(a);var g=f.fillTpl(this.model,this.id);d.isFunction(c)?c(g,b):c?e.appendTo(g,b):e.setHtml(b,g),f.bind(this.model,this.dataBinds,this.id)}},this.validate=function(a){/^input$/i.test(a.nodeName)&&/^(?:button|submit|image)$/i.test(a.type)?a=a.form:/^(?:button|a)$/i.test(a.nodeName)&&(a=e.getTargetForm(a)||a);var b=[];b=b.concat(e.getAll("input",a),e.getAll("select",a),e.getAll("textarea",a));var c=this,d=!0;return g.forEach(b,function(a,b){if(a.id&&!a.disabled&&!e.getAttr(a,"ignore")&&(!/^input$/i.test(a.nodeName)||!/^(?:button|submit|image|checkbox|radio|range|reset|hidden)$/i.test(a.type))){var f=c.dataBind.getParsedValidators(a.id),h=[];g.forEach(c.dataBinds,function(b){var c=b.getParsedValidators(a.id);c&&c.length&&h.push(c)}),h.length&&(f=Array.prototype.concat.apply(f,h));var i=m.validate(f,a);d&&!i&&(d=!1)}}),d},this.forward=function(a,b,c){o.route(a,b,c)},this.back=function(){this.forward("#!"+(this.args.referrer||"/"))},this.bindEvent=d.noop,this._bindEvent=function(){try{this.bindEvent(this.model,this.model.watcher,this.requestHelper,this.args,this.lruCache)}catch(a){if(p.notify("errorCapture",{action:this.name,method:"bindEvent",originalError:a}),window.DEBUG)throw a}this.lifePhase=this.LifeCycle.EVENT_BOUND},this.beforeRender=d.noop,this._beforeRender=function(){try{this.beforeRender(this.model,this.model.watcher,this.requestHelper,this.args,this.lruCache)}catch(a){if(p.notify("errorCapture",{action:this.name,method:"beforeRender",originalError:a}),window.DEBUG)throw a}},this._render=function(){this.render(this.model,this.model.watcher,this.requestHelper,this.args,this.lruCache),this.lifePhase=this.LifeCycle.RENDERED},this.render=d.noop,this.afterRender=d.noop,this._afterRender=function(){try{this.afterRender(this.model,this.model.watcher,this.requestHelper,this.args,this.lruCache)}catch(a){if(p.notify("errorCapture",{action:this.name,method:"afterRender",originalError:a}),window.DEBUG)throw a}},this.loadTpl=function(a){if(!this.tplUrl||this.tpl)a();else{var b=this;i.load(this.tplUrl+"?"+(new Date).getTime(),function(c){b.constructor.prototype.tpl=c,a()})}},this.enter=function(a){this.args=a,this.lifePhase<this.LifeCycle.INITED&&this.init();var b=this;this._initModel(),this._requestData(function(){b._beforeRender(b.model,b.model.watcher,b.requestHelper,b.args,b.lruCache),b._render(),b._afterRender(b.model,b.model.watcher,b.requestHelper,b.args,b.lruCache),b.lifePhase<b.LifeCycle.EVENT_BOUND&&b._bindEvent()}),this.loadTpl(function(){b.lifePhase>=b.LifeCycle.DESTROYED||(b.title&&b.title!==document.title&&(document.title=b.title),b._applyBind(),b.promise.listen())})},this.beforeLeave=d.noop,this._beforeLeave=function(){try{this.beforeLeave(this.model,this.model.watcher,this.requestHelper,this.args,this.lruCache)}catch(a){if(p.notify("errorCapture",{action:this.name,method:"beforeLeave",originalError:a}),window.DEBUG)throw a}},this.leave=function(a){this._beforeLeave(this.model,this.model.watcher,this.requestHelper,this.args,this.lruCache),this.args={},this.dataRequestPromise=null,this.dataBind.destroy(),g.forEach(this.dataBinds,function(a){a.destroy(!0)}),this.dataBinds.length=0,this.model.destroy(),a&&a.container!==this.container&&e.empty(this.container),this.lifePhase=this.LifeCycle.DESTROYED}}.call(b.prototype),b}),define("bird.applicationcontext",[],function(a){function b(){this.cache={}}return function(){this.set=function(a,b){this.cache[a]=b},this.get=function(a){return this.cache[a]},this.remove=function(a){return delete this.cache[a]}}.call(b.prototype),new b}),define("bird.controller",["./bird.router","bird.lang","bird.array","bird.logger","./bird.action"],function(a){function b(){this.actionInstanceCache={}}var c=a("./bird.router"),d=a("bird.lang"),e=a("bird.array"),f=a("bird.logger"),g=a("./bird.action");return function(){function b(a,b,c){b.action=c,this.currentAction&&this.currentAction.leave(a),this.currentAction=a,a.enter(b)}this.start=function(){c.start(),this.initActionListener(),f.log("bird.controller started!")},this.dispatch=function(c,e){var f=this;f.lastName=c;var h=this.actionInstanceCache[c];return h?void b.call(this,h,e,c):void(a.async||a)(c,function(a){if(c===f.lastName&&d.isFunction(a)){var h=new a;h instanceof g&&(f.actionInstanceCache[c]=h,b.call(f,h,e,c))}})},this.initActionListener=function(){var a=this;e.forEach(this.actionMaps,function(b){c.listenLocation(b,function(c){d.isString(b.action)?a.dispatch(b.action,c):d.isArray(b.action)&&e.forEach(b.action,function(b){a.dispatch(b,c)})})})},this.configApp=function(a){this.actionMaps=d.isArray(a)?a:a.actionMaps}}.call(b.prototype),new b}),define("bird.databind",["bird.dom","bird.lang","bird.array","bird.event","bird.object","bird.string","bird.request","bird.lrucache","./bird.tplparser","./bird.filter","./bird.validator","./bird.handlemap"],function(a){function b(){this.tplParser=new j,this.typeHandleMap=a("./bird.handlemap"),this.eventBindedNodes=[]}var c=a("bird.dom"),d=a("bird.lang"),e=a("bird.array"),f=a("bird.event"),g=a("bird.object"),h=(a("bird.string"),a("bird.request")),i=a("bird.lrucache"),j=a("./bird.tplparser"),k=a("./bird.filter"),l=a("./bird.validator");return function(){function a(a,d,e,f,g){var h;if(a)if(/\{\{[^{}]+\}\}/.test(d)){var i=new b;i.parseTpl(d),h=i.fillTpl(e,f),c.setHtml(a,h),i.bind(e,g,f),g.push(i)}else h=d,c.setHtml(a,h)}this.parseTpl=function(a){a&&!this.tplParser.parsedTpl&&this.tplParser.parseTpl(a)},this.fillTpl=function(a,b){var c=this.tplParser.parsedInfoCache,f=this.tplParser.parsedTpl;return g.forEach(c,function(b){g.forEach(b,function(b,c){if(d.isPlainObject(b)&&b.variable){var g="\\{\\{\\s*"+b.variable+"\\s*(?:\\|[^{}]+)?\\}\\}",h="";if("include"!==b.filter&&(h=a.get(b.variable)),d.isUndefinedOrNull(h)){h="";var i=b.variable.lastIndexOf(".");if(-1===i)a[b.variable]=h;else{var j=d.getObjectInContext(b.variable.substring(0,i),a);j[b.variable.substring(i+1,b.variable.length)]=h,j=null}}/^event$/i.test(c)&&(g="on"+b.key+"=([\"'])\\s*"+g+"\\s*\\1",h=""),""===h&&(/^(?:readonly|disabled|checked|selected)$/i.test(c)?g=c+"=([\"'])\\s*"+g+"\\s*\\1":/^style$/i.test(c)&&b.key?g=b.key+":\\s*"+g+"\\s*;?":/^class$/i.test(c)&&(g="\\s*"+g));var l=new RegExp(g,"g");b.filter&&!/^(?:value|htmlText)$/i.test(c)&&h&&(h=k.filter(h,b.filter)),f=f.replace(l,h)}else if(d.isArray(b)){var m=arguments;e.forEach(b,function(a){m.callee(a,c)})}})}),f},this.bind=function(b,j,k){var l=this;g.forEach(this.tplParser.parsedInfoCache,function(m){var n=m.id,o=c.getElementById(n);g.forEach(m,function(c,g){if(!/^(?:id|tagName)$/.test(g)){if("include"===c.filter){var m=i.getValue(c.variable);return void(m?a(o,m,b,k,j):h.syncLoad(c.variable,function(d){a(o,d,b,k,j),i.add(c.variable,d)}))}if(d.isPlainObject(c)&&c.variable){var p=b.get(c.variable);if(/^event$/i.test(g)){var q=n+"-"+c.key,r=function(a){var b=l.typeHandleMap.eventMap[q]||d.noop;b.call(this,a)};l.typeHandleMap.eventMap[q]||(l.typeHandleMap.eventMap[q]=d.isFunction(p)?p:d.noop),f.on(o,c.key,r),e.pushUniqueInArray(o,l.eventBindedNodes)}l._bindHandleByType(b.watcher,c,g,o,n)}else if(d.isArray(c)){var s=arguments;e.forEach(c,function(a){s.callee(a,g)})}}}),/^select$/i.test(m.tagName)&&d.isPlainObject(m.valueVariable)?l._addEventOnSelect(o,m.valueVariable,b):/^input$/i.test(m.tagName)?/^(?:checkbox|radio)$/i.test(o.type)&&d.isPlainObject(m.valueVariable)?l._addEventOnSelect(o,m.valueVariable,b):d.isPlainObject(m.value)&&l._addEventOnInput(o,m.value,b):/^textarea$/i.test(m.tagName)&&d.isPlainObject(m.value||m.htmlText)&&l._addEventOnInput(o,m.value||m.htmlText,b)})},this._addEventOnInput=function(a,b,c){function d(a){if(!a.propertyName||"value"===a.propertyName){var b=a.target;j.length&&!l.validate(j,b)||c.set(g,b.value,i,b)}}var g=b.variable,h=b.filter,i=this,j=b.validators=[];if(e.pushUniqueInArray(a,this.eventBindedNodes),h){var k=h.split(/\s+/);e.forEach(k,function(a){var b=a.split(",");j.push({ruleName:b[0],rulePropertys:b.slice(1)})})}f.on(a,"change",d)},this._addEventOnSelect=function(a,b,d){function g(a){var b,e=a.target;/^input$/i.test(e.tagName)?/^checkbox$/i.test(e.type)?(b=c.getCheckboxValues(e),b=b.length?b.join(","):""):/^radio$/i.test(e.type)&&(b=c.getRadioValue(e)):/^select$/i.test(e.tagName)&&(b=c.getSelectedOptionValues(e),b=b.length?b.join(","):""),d.set(h,b,i,e)}var h=b.variable,i=(b.filter,this);e.pushUniqueInArray(a,this.eventBindedNodes),f.on(a,"change",g)},this._bindHandleByType=function(a,b,c,e,f){var g=this.typeHandleMap;if(d.isPlainObject(b)){var h=b.variable;/^textarea$/i.test(e.tagName)&&(c="value"),a.subscribe(h,(g[c]||g["default"]).call(g,e,f,h,b.filter,"event"===c||"style"===c?b.key:c))}},this.getParsedValidators=function(a){var b=this.tplParser.parsedInfoCache[a],c=[];return b&&(b.value&&b.value.validators?c=b.value.validators:b.htmlText&&b.htmlText.validators&&(c=b.htmlText.validators)),c},this.destroy=function(a){a&&this.tplParser.destroy(),g.forEach(this.typeHandleMap.eventMap,function(a,b,c){delete c[b]}),e.forEach(this.eventBindedNodes,function(a){f.destroy(a)}),this.eventBindedNodes.length=0}}.call(b.prototype),b}),define("bird.filter",["bird.array"],function(a){function b(){}var c=a("bird.array");return function(){var a={"int":function(a){return parseInt(a)},"float":function(a,b){return parseFloat(a).toFixed(b)},RMB:function(a){return"RMB"+a},dollar:function(a){return"$"+a},date:function(a,b){}};this.filter=function(b,d){var e=d.split(/\s+/);return c.forEach(e,function(c){var d=c.split(":"),e=d[0],f=a[e];if(f){var g=d[1]?d[1].split(","):[];g.unshift(b),b=f.apply(null,g)}}),b}}.call(b.prototype),new b}),define("bird.globalcontext",["bird.lang"],function(a){function b(){d.globalContext={}}var c=a("bird.lang"),d=window;return function(){this.set=function(a,b){d.globalContext[a]=b},this.get=function(a){return d.globalContext[a]},this.getObject=function(a){a=a.replace(/^globalContext\./,"");var b,e=a.split(".");if(1===e.length)return b=e[0],d.globalContext[b]=d.globalContext[b]||{},d.globalContext[b];for(var f=d.globalContext,g=0,h=e.length;h>g;g++){var i=f[e[g]];c.isNullOrUndefined(i)&&(i={},f[e[g]]=i),f=i}return f},this.getObjectLiteral=function(a){return a=a.replace(/^globalContext\./,""),"globalContext."+a},this.remove=function(a){return delete d.globalContext[a]}}.call(b.prototype),new b}),define("bird.handlemap",["bird.dom","bird.lang","bird.array","bird.event","./bird.filter"],function(a){function b(){this.eventMap={}}var c=a("bird.dom"),d=(a("bird.lang"),a("bird.array")),e=(a("bird.event"),a("./bird.filter"));return function(){this.htmlText=function(a,b,d,f){return"text"===f?function(b){b=f&&!/^(?:html|text)$/i.test(f)?e.filter(b,f):b,c.setText(a,b)}:function(b){b=f&&!/^(?:html|text)$/i.test(f)?e.filter(b,f):b,c.setHtml(a,b)}},this.value=function(a,b,d,e){return function(b,d,e){e!==a&&c.setValue(a,b)}},this.valueVariable=function(a,b,e,f){return function(b,e,f){if(f!==a){b=b.replace(/,/g,"|");var g=new RegExp("^(?:"+b+")$");if(/^input$/i.test(a.tagName))g.test(a.value)?a.checked=!0:a.checked=!1;else if(/^select$/i.test(a.tagName)){var h=c.getOptionsOfSelect(a);d.forEach(h,function(a){g.test(a.value)?a.selected=!0:a.selected=!1})}}}},this.disabled=function(a,b,c,d){return function(b){a.disabled=!!b}},this.readonly=function(a,b,c,d){return function(b){a.readOnly=!!b}},this.checked=function(a,b,c,d){return function(b){a.checked=!!b}},this.selected=function(a,b,c,d){return function(b){a.selected=!!b}},this.placeholder=function(a,b,d,e){return function(b){c.setAttr(a,"placeholder",b)}},this["for"]=function(a,b,d,e){return function(b){c.setAttr(a,"for",b)}},this.alt=function(a,b,d,e){return function(b){c.setAttr(a,"alt",b)}},this.style=function(a,b,d,f,g){return g?function(b){b=f?e.filter(b,f):b,a.style[g]=b}:function(b){c.setCssText(a,b)}},this["class"]=function(a,b,d,e){return function(b,d){d&&c.removeClass(a,d),b&&c.addClass(a,b)}},this.event=function(a,b,c,d,e){eventMap=this.eventMap;var f=b+"-"+e;return function(a){eventMap[f]=a}},this["default"]=function(a,b,d,e,f){return function(b){c.setAttr(a,f,b)}}}.call(b.prototype),new b}),define("bird.model",["bird.lang","bird.array","bird.object","bird.logger","bird.__observer__"],function(a){function b(){this.watcher=new g}var c=a("bird.lang"),d=a("bird.array"),e=a("bird.object"),f=a("bird.logger"),g=a("bird.__observer__");return function(){var a={set:1,get:1,destroy:1,toJSON:1,toQuery:1,filterJSON:1,watcher:1};this.set=function(a,b){var d,e=a,f=e.lastIndexOf(".");-1===f?d=this:(d=c.getObjectInContext(e.substring(0,f),this),e=e.substring(f+1,e.length));var g=d[e];if(g!==b){d[e]=b,d=null;var h=[a,b,g,arguments[arguments.length-1]];this.watcher.publish.apply(this.watcher,h),h=null}},this.get=function(a){return c.getVariableInContext(a,this)},this.toJSON=function(a){return this.filterJSON.apply(this,arguments)},this.filterJSON=function(a){var b;c.isArray(a)?(b=a,a=this):c.isString(a)?(b=Array.prototype.slice.call(arguments),a=this):(b=arguments[1],b=c.isArray(b)?b:Array.prototype.slice.call(arguments,1));var e={};return d.forEach(b,function(b){var c=b.lastIndexOf(".");if(-1!==c){if(c!==b.indexOf("."))return void f.warn('Only support filter key like "a" or "a.b", and "a.b.c" which dot number more than 1 is not supported!');var d=b.split("."),g=d[1];e[g]=a[d[0]][g]}else e[b]=a[b]}),e},this.toQuery=function(a){var b=this.toJSON.apply(this,arguments),d=[];return e.forEach(b,function(a,b){c.isFunction(a)||d.push(b+"="+a)}),d.join("&")},this.destroy=function(){var b=this;this.watcher.unsubscribe(),e.forEach(this,function(c,d){a[d]||delete b[d]})}}.call(b.prototype),b}),define("bird.requesthelper",["bird.object","bird.array","bird.request","bird.string","bird.logger"],function(a){function b(){}var c=a("bird.object"),d=(a("bird.array"),a("bird.request")),e=a("bird.string"),f=a("bird.logger");return function(){this.generateRequestMethods=function(a,b){var g=this,h={getById:"GET",getList:"GET",save:"POST",update:"PUT",removeById:"DELETE",remove:"DELETE"};c.forEach(h,function(b,c){a[c]||!a.resource||g[c]||(a[c]=b+" "+a.resource,/^(?:getById|update|removeById)$/.test(c)&&(a[c]+=(/\/$/.test(a[c])?"":"/")+"{{id}}"))}),c.forEach(a,function(a,c){if("resource"!==c){var h=c,i=a.split(/\s+/),j=i&&i[0],k=i&&i[1];return j?k?void(g[h]=function(a,b,c){var f=k;/\{\{.+?\}\}/.test(k)&&(f=e.format(k,a,function(a,b){delete b[a]})),d.ajax({url:f,data:a,requestType:j,responseType:"json",complete:b,error:c})}):void f.warn("模块: `"+b+"`, 数据请求方法: `"+c+"` 缺少请求URL!"):void f.warn("模块: `"+b+"`, 数据请求方法: `"+c+"` 缺少请求类型!")}}),a.save&&!this.saveOrUpdate&&(this.saveOrUpdate=function(a,b,c){a.id?this.update(a,b,c):this.save(a,b,c)})}}.call(b.prototype),b}),define("bird.router.hashchange",["bird.event","bird.__observer__","bird.lang","bird.object","bird.logger"],function(a){function b(){this.notFoundActionMap=null,this.locationMap={}}return function(){var b=a("bird.event"),c=a("bird.__observer__"),d=a("bird.lang"),e=a("bird.object"),f=a("bird.logger");this.actionObserver=new c,this.start=function(){this.watchHash(),this.bootFirstUrl(),f.log("bird.router[use hashChange] started!")},this.changeHash=function(a){a=a.replace(/^#/,""),this.lastHash!==a&&(location.hash=a)},this.getHash=function(){var a=location.hash;return a?a.replace(/^#/,"").replace(/^!/,"")||"/":"/"},this.watchHash=function(){this.lastHash="";var a=this;b.addListener(window,"hashchange",function(){a.handleHashChange()})},this.handleHashChange=function(a){a=a||this.getHash(),this.lastHash!==a&&(this.referrer=this.lastHash,this.lastHash=a,this.parseActionQueryParam(),this.callModule())},this.parseActionQueryParam=function(){var a=/([^!#~=&]+)(?:~([^#~]*))?/.exec(this.lastHash);if(this.location="",this.query="",this.param=null,a&&(this.location=a[1]||"",this.query=a[2]||""),this.query){this.query=decodeURIComponent(this.query);var b=this.param={};this.query.replace(/([^#~=&]+)=([^#~=&]*)/g,function(a,c,d){b[c]=d}),b=null}},this.callModule=function(){if(this.location){var a=this.location,b=this.locationMap[a];if(!b){if(/^\/?[^~#!?]+\/[^~#!?]+/.test(a)){var c=a.lastIndexOf("/"),d=a.substring(0,c+1)+"{{",f=this;e.each(this.locationMap,function(b,e){if(0===e.indexOf(d)){var g=/\{\{([^~#!?{}]+)\}\}/.exec(e);g=g&&g[1];var h=a.substring(c+1);return f.param=f.param||{},f.param[g]=h,a=e,!1}})}if(a===this.location&&this.notFoundActionMap)return void location.replace(location.href.split("#")[0]+"#!"+this.notFoundActionMap.location)}this.actionObserver.publish(a,{param:this.param,query:this.query,location:this.location,referrer:this.referrer})}},this.route=function(a,b,c){return c?void window.location.replace(a):void(b&&!/^#/.test(a)?window.location.href=a:this.changeHash(a))},this.bootFirstUrl=function(){var a=this;d.nextTick(function(){a.handleHashChange()})},this.listenLocation=function(a,b){a.isNotFound&&(this.notFoundActionMap=a),this.locationMap[a.location]=a,this.actionObserver.subscribe(a.location,b)}}.call(b.prototype),new b}),define("bird.router.ie7support",["bird.event","bird.browser","bird.lang","bird.__observer__","bird.object","bird.logger"],function(a){function b(){this.notFoundActionMap=null,this.locationMap={}}return function(){var b=a("bird.event"),c=a("bird.browser"),d=a("bird.lang"),e=a("bird.__observer__"),f=a("bird.object"),g=a("bird.logger");this.actionObserver=new e,this.start=function(){this.init(),this.watchHash(),this.bootFirstUrl(),g.log("bird.router[ie7support] started!")},this.init=function(){var a=/ie\s*(\d+)/.exec(c.browser);a=a&&a[1],this.isHashHistoryNotSupported=a&&8>a;var b=document,e=b.documentMode;if(this.isHashChangeSupported="onhashchange"in window&&(d.isUndefined(e)||e>7),this.needIframeHistory=!this.isHashChangeSupported||this.isHashHistoryNotSupported,this.needIframeHistory){this.HISTORY_IFRAME_URL="./js/lib/bird/mvvm/__history__.html";var f=b.createElement("IFRAME");f.src=this.HISTORY_IFRAME_URL+"?"+this.getHash(),f.style.display="none",f.style.position="absolute",f.style.left="-9999px",f.style.top="-9999px",f.width="0",f.height="0",f.scrolling="no",b.body.insertBefore(f,b.body.firstChild),this.historyIframe=f,f=iframeWindow=a=null}},this.changeHash=function(a){this.lastHash!==a&&(this.needIframeHistory?this.changeIframeUrl(a):location.hash=a)},this.changeIframeUrl=function(a){this.historyIframe.contentWindow.location.href=this.HISTORY_IFRAME_URL+"?"+a},this.getHash=function(){var a=location.hash;return a?a.replace(/^#/,"").replace(/^!/,"")||"/":"/"},this.getIframeHash=function(){
var a=/\?(.+)/.exec(this.historyIframe.contentWindow.location.href);return a&&a[1]||"/"},this.watchHash=function(){this.lastHash="";var a=this;this.needIframeHistory?b.addListener(this.historyIframe,"load",function(b){var c=a.getIframeHash();c||(c="/"),location.hash=c,a.handleHashChange(c)}):b.addListener(window,"hashchange",function(){a.handleHashChange()}),this.isHashChangeSupported||(this.hashPollInterval&&(clearInterval(this.hashPollInterval),this.hashPollInterval=null),this.hashPollInterval=setInterval(function(){a.changeHash(a.getHash())},100))},this.handleHashChange=function(a){a=a||this.getHash(),this.lastHash!==a&&(this.referrer=this.lastHash,this.lastHash=a,this.parseActionQueryParam(),this.callModule())},this.parseActionQueryParam=function(){var a=/([^!#~=&]+)(?:~([^#~]*))?/.exec(this.lastHash);if(this.location="",this.query="",this.param=null,a&&(this.location=a[1]||"",this.query=a[2]||""),this.query){this.query=decodeURIComponent(this.query);var b=this.param={};this.query.replace(/([^#~=&]+)=([^#~=&]*)/g,function(a,c,d){b[c]=d}),b=null}},this.callModule=function(){if(this.location){var a=this.location,b=this.locationMap[a];if(!b){if(/^\/?[^~#!?]+\/[^~#!?]+/.test(a)){var c=a.lastIndexOf("/"),d=a.substring(0,c+1)+"{{",e=this;f.each(this.locationMap,function(b,f){if(0===f.indexOf(d)){var g=/\{\{([^~#!?{}]+)\}\}/.exec(f);g=g&&g[1];var h=a.substring(c+1);return e.param=e.param||{},e.param[g]=h,a=f,!1}})}if(a===this.location&&this.notFoundActionMap)return void this.route("!"+this.notFoundActionMap.location)}this.actionObserver.publish(a,{param:this.param,query:this.query,location:this.location,referrer:this.referrer})}},this.route=function(a,b,c){return c?void window.location.replace(a):void(b&&!/^#/.test(a)?window.location.href=a:this.changeHash(a.replace(/^#/,"")))},this.bootFirstUrl=function(){var a=this;d.nextTick(function(){a.handleHashChange()})},this.listenLocation=function(a,b){a.isNotFound&&(this.notFoundActionMap=a),this.locationMap[a.location]=a,this.actionObserver.subscribe(a.location,b)}}.call(b.prototype),new b}),define("bird.router",["./bird.router.hashchange"],function(a){return a("./bird.router.hashchange")}),define("bird.router.pushstate",["bird.event","bird.__observer__","bird.lang","bird.object","bird.logger"],function(a){function b(){this.notFoundActionMap=null,this.locationMap={}}return function(){var b=a("bird.event"),c=a("bird.__observer__"),d=a("bird.lang"),e=a("bird.object"),f=a("bird.logger");this.actionObserver=new c,this.start=function(){this.watchLocation(),this.bootFirstUrl(),f.log("bird.router[use pushState] started!")},this.changeLocation=function(a){a=a.replace(/^#!/,""),this.lastLocation!==a&&(a=0===a.indexOf("?")?a:"?"+a,history.pushState({loc:a},null,location.pathname+a),this.handleLocationChange(a))},this.getLocation=function(){if(history.state&&history.state.loc)return history.state.loc;var a=location.search;return a||"?/"},this.watchLocation=function(){this.lastLocation="";var a=this;b.addListener(window,"popstate",function(b){b.preventDefault();var c=b.state&&b.state.loc;a.handleLocationChange(c)}),b.delegate("a","click",function(b){var c=b.target.getAttribute("href");c&&0===c.indexOf("#!")&&(b.preventDefault(),c=c.replace(/^#!/,""),-1===c.indexOf("?")&&(c="?"+c),a.handleLocationChange(c))},document)},this.handleLocationChange=function(a){a=a||this.getLocation(),this.lastLocation!==a&&(this.referrer=this.lastLocation,this.lastLocation=a,history.state&&history.state.loc==a||history.pushState({loc:a},"",a),this.parseActionQueryParam(),this.callModule())},this.parseActionQueryParam=function(){var a=/([^!~=&?]+)(?:~([^~?]*))?/.exec(this.lastLocation);if(this.location="",this.query="",this.param=null,a&&(this.location=a[1]||"",this.query=a[2]||""),this.query){this.query=decodeURIComponent(this.query);var b=this.param={};this.query.replace(/([^~=&?]+)=([^~=&?]*)/g,function(a,c,d){b[c]=d}),b=null}},this.callModule=function(){if(this.location){var a=this.location,b=this.locationMap[a];if(!b){if(/^\/?[^~#!?]+\/[^~#!?]+/.test(a)){var c=a.lastIndexOf("/"),d=a.substring(0,c+1)+"{{",f=this;e.each(this.locationMap,function(b,e){if(0===e.indexOf(d)){var g=/\{\{([^~#!?{}]+)\}\}/.exec(e);g=g&&g[1];var h=a.substring(c+1);return f.param=f.param||{},f.param[g]=h,a=e,!1}})}if(a===this.location&&this.notFoundActionMap){var g="?"+this.notFoundActionMap.location;return history.replaceState({loc:g},null,location.pathname+g),void this.handleLocationChange(g)}}this.actionObserver.publish(a,{param:this.param,query:this.query,location:this.location,referrer:this.referrer})}},this.route=function(a,b,c){return c?void window.location.replace(a):void(b&&!/^#!/.test(a)?window.location.href=a:this.changeLocation(a))},this.bootFirstUrl=function(){var a=this;d.nextTick(function(){a.handleLocationChange()})},this.listenLocation=function(a,b){a.isNotFound&&(this.notFoundActionMap=a),this.locationMap[a.location]=a,this.actionObserver.subscribe(a.location,b)}}.call(b.prototype),new b}),define("bird.tplparser",["bird.dom","bird.lang","bird.array","bird.event","bird.object","bird.string","bird.util"],function(a){function b(){this.parsedInfoCache={},this.parsedTpl=""}var c=(a("bird.dom"),a("bird.lang")),d=a("bird.array"),e=(a("bird.event"),a("bird.object")),f=a("bird.string"),g=a("bird.util");return function(){var a=["id"],b=["class","src","href","value","valueVariable","style","type","alt","for","readonly","disabled","checked","selected","placeholder"],h=["_parseInlineEvents"],i={htmlStartTag:/<([a-zA-Z]+\d*)([^>]*?)\/?>/g,htmlEndTag:/<\/[a-zA-Z]+\d*>/,innerText:/<([a-zA-Z]+\d*)\s*([^>]*?)>(?:[^<>]*?)(\{\{[^<>{}]+?\}\})(?:[^<>]*?)<\/\1>/g,hasVariable:/\{\{[^{}]+\}\}/};this._extendParseFunctionName=function(a,b,c){d.forEach(a.concat(b),function(a){c.push("_parse"+f.capitalize(a))})},this._generateLiteralAttrRegExp=function(a,b){d.forEach(a,function(a){b[a]=new RegExp("\\s+"+a+"(?:=(['\"])\\s*((?:.|\\n|\\r)+?)\\s*\\1)?","i")})},this._generateVariableAttrRegExp=function(a,b){d.forEach(a,function(a){b[a]=new RegExp("\\s+"+a+"=(['\"])\\s*((?:.|\\n|\\r)*?)\\s*\\1","i")})},this._generateLiteralParser=function(a){var b=this;d.forEach(a,function(a){b["_parse"+f.capitalize(a)]=function(b,c){var d=i[a].exec(b);d&&d[2]&&(c[a]=d[2])}})},this._generateVariableParser=function(a){var b=this;d.forEach(a,function(a){b["_parse"+f.capitalize(a)]=function(b,c){var d=i[a].exec(b);if(d){var e=this._parsePlaceholderVariableAndFilter(d[2]);if(e){var f=e[1],g=e[2];if(f){var h=c[a]={variable:f};g&&(h.filter=g)}}}}})},this._extendParseFunctionName(a,b,h),this._generateLiteralAttrRegExp(a,i),this._generateVariableAttrRegExp(b,i),this._generateLiteralParser(a),this._generateVariableParser(b),this.parseTpl=function(a){return a=f.removeHtmlComments(a),this.parsedTpl=f.removeSpaceBetweenTags(a),this._parseHtmlProperties(),this._parseTextContent(),this.parsedTpl},this._parseHtmlProperties=function(){for(var a,b,c;a=i.htmlStartTag.exec(this.parsedTpl);)if(b=a[1],c=a[2],i.hasVariable.test(c)){var d=/\s+id=(['"])(.+?)\1/i.exec(c),e=d&&d[2]||g.uuid("bind_"),f=this.parsedInfoCache[e]={id:e,tagName:b};this._compilePropertyTplStr(c,f,a[0])}},this._parseTextContent=function(){for(var a,b,c;a=i.innerText.exec(this.parsedTpl);){if(tagName=a[1],propertyStr=a[2],/id=/i.test(propertyStr)){if(c=/id=(['"])(.+?)\1/i.exec(propertyStr)){var d=c[2];d&&(b=this.parsedInfoCache[d],b||(b=this.parsedInfoCache[d]={tagName:tagName,id:d}))}}else{var e=g.uuid("bind_");b=this.parsedInfoCache[e]={tagName:tagName,id:e},this._addBindIdToHtmlStartTag(a[0],e)}var f=this._parsePlaceholderVariableAndFilter(a[3]);f&&f[1]&&(b.htmlText={variable:f[1],filter:f[2]||(/^textarea$/i.test(tagName)?"text":"html")})}},this._compilePropertyTplStr=function(a,b,d){var e=this;a&&a.replace(/\s+([a-z][a-z0-9_\-$]*=(['"])\s*(?:.|\n|\r)*?\s*\2)/gi,function(d,g){if(i.hasVariable.test(g)&&/\=/.test(g)){var h=g.split("=")[0],j=/^on/i.test(h)?e._parseInlineEvents:e["_parse"+f.capitalize(h)];c.isFunction(j)?j.call(e,a,b):e.parseUnregisterProperty(h,a,b)}}),/\s+id=/i.test(d)||this._addBindIdToHtmlStartTag(d,b.id)},this._addBindIdToHtmlStartTag=function(a,b){var c,d,e=/^(<[a-z]+\d*)(\/?>(?:.|\n|\r)*)/i,f=/^(<[a-z]+\d*)(\s+(?:.|\n|\r)*\/?>)/i;(d=e.exec(a)||f.exec(a))&&(c=d[1]+' id="'+b+'"'+d[2]),this.parsedTpl=this.parsedTpl.replace(a,c)},this._parsePlaceholderVariableAndFilter=function(a){var b=/^\s*\{\{\s*([^{}|]+?)(?:\s*\|\s*([^{}|]+))?\s*\}\}/;return b.exec(a)},this._parseClass=function(a,b){var c=i["class"].exec(a);if(c){var e=c[2],f=this._getVariableNames(e);f&&f.length&&(b["class"]=[],d.forEach(f,function(a){b["class"].push({variable:a})}))}},this._parseInlineEvents=function(a,b){for(var c,d=[],e=/\bon([a-z]+)=(['"])(?:[^'"{}]+?\s*)*\s*\{\{([a-z_$][a-z0-9_$().:]*?)\}\}\s*(?:[^'"{}]+?\s*)*\2/gi;c=e.exec(a);)d.push({key:c[1],variable:c[3]});d.length&&(b.event=d)},this._parseStyle=function(a,b){var c=i.style.exec(a);if(c){var d=this._getOnlyOneVariableName(c[2]);if(d)return void(b.style={variable:d});var e=this._getKeyValueVariableNames(c[2]);e&&e.length&&(b.style=e)}},this._getVariableNames=function(a){for(var b,c=[],d=/\{\{\s*([^{}]+)\s*\}\}/g;b=d.exec(a);)c.push(b[1]);return c},this._getOnlyOneVariableName=function(a){var b=/^\s*\{\{\s*([^{}]+)\s*\}\}\s*$/,c=b.exec(a);return c&&c[1]},this._getKeyValueVariableNames=function(a){for(var b,c=[],d=/([^:;{}]+)\s*:\s*\{\{\s*([^{};:]+)\s*\}\}/g;b=d.exec(a);)c.push({key:f.camelize(b[1]),variable:b[2]});return c},this.parseUnregisterProperty=function(a,b,c){var d=new RegExp("\\s+"+a+"=(['\"])\\s*((?:.|\\n|\\r)*?)\\s*\\1","i"),e=d.exec(b);if(e){var f=this._parsePlaceholderVariableAndFilter(e[2]);if(f){var g=f[1],h=f[2];if(g){var i=c[a]={variable:g};h&&(i.filter=h)}}}},this.destroy=function(){e.forEach(this.parsedInfoCache,function(a,b,c){delete c[b]}),this.parsedTpl=""}}.call(b.prototype),b}),define("bird.validator",["bird.lang","bird.string","bird.array","bird.object","bird.dom"],function(a){function b(){}var c=a("bird.lang"),d=a("bird.string"),e=a("bird.array"),f=(a("bird.object"),a("bird.dom"));return function(){function a(a){if(a.autoCloseTimer){clearTimeout(a.autoCloseTimer);try{delete a.autoCloseTimer}catch(b){a.autoCloseTimer=null}}}var b={required:/.+/,email:/^\w+[-+.\w]*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,phone:/^((\(\d{3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}$/,mobile:/^0?1\d{10}$/,name:/^[\u0391-\uFFE5]{2,20}$/,pinyin:/^[a-zA-Z]*$/,url:/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/,idCard:/^\d{17}[A-Za-z0-9]$/,currency:/^\d+(\.\d+)?$/,number:/^\d+$/,zip:/^\d{6}$/,qq:/^[1-9]\d{4,11}$/,Integer:/^[-\+]?\d+$/,Double:/^[-\+]?\d+(\.\d+)?$/,english:/^[A-Za-z]+$/,chinese:/^[\u0391-\uFFE5]+$/,passport:/^[Pp]([0-9]{7})$|^[Gg]([0-9]{8})$/,address:/((.*[\u0391-\uFFE5].*)+){6,}/,authCode:/^\d{6}$/,date:/^\d{4}-\d{1,2}-\d{1,2}$/,birthday:/^\d{4}-\d{2}-\d{2}$/,datetime:/^\d{4}-\d{1,2}-\d{1,2} \d{1,2}:\d{1,2}:\d{1,2}$/,time:/^\d{1,2}:\d{1,2}:\d{1,2}$/,carNo:/^[\u4e00-\u9fa5]{1}[a-zA-Z]{1}[a-zA-Z_0-9]{4}[a-zA-Z_0-9_\u4e00-\u9fa5]$|^[a-zA-Z]{2}\d{7}$/,validCode:/^[A-Za-z0-9]{4}$/,qq:/^\d{4,}$/,password:/^[a-zA-Z0-9-_]+$/},g={required:"请输入",number:"只能输入数字",positiveNumber:"只能输入正数",positiveInt:"只能输入正整数",negativeNumber:"只能输入负数",negativeInt:"只能输入负整数",notNegativeNumber:"只能输入非负数",notNegativeInt:"只能输入非负整数",notPositiveNumber:"只能输入非正数",notPositiveInt:"只能输入非正整数",email:"邮箱格式不正确",mobile:"手机号码格式不正确",date:"日期格式不正确",datetime:"日期和时间格式不正确",birthday:"生日格式不正确, 正确格式如：2012-08-08",qq:"QQ号码格式不正确",password:'密码只能由字母、数字、"_"或"-"组成',idCard:"身份证号码格式不正确","float":"小数位不能超过{{digit}}位",minLength:"字符数不能少于{{minLength}}个",maxLength:"字符数不能超过{{maxLength}}个"},h={required:function(a,c){var d=b.required.test(a);return{success:d,message:!d&&g.required+(c||"")}},number:function(a){if(null==a||""===a)return{success:!0};var b=!isNaN(+a);return{success:b,message:!b&&g.number}},positiveNumber:function(a){if(null==a||""===a)return{success:!0};var b=this.number(a);return b.success?(b=+a>0,{success:b,message:!b&&g.positiveNumber}):b},positiveInt:function(a){if(null==a||""===a)return{success:!0};var b=this.positiveNumber(a);return b.success?(b=/^\+?\d+$/.test(a),{success:b,message:!b&&g.positiveInt}):b},negativeNumber:function(a){if(null==a||""===a)return{success:!0};var b=this.number(a);return b.success?(b=0>+a,{success:b,message:!b&&g.negativeNumber}):b},negativeInt:function(a){if(null==a||""===a)return{success:!0};var b=this.negativeNumber(a);return b.success?(b=/^\-\d+$/.test(a),{success:b,message:!b&&g.negativeInt}):b},notNegativeNumber:function(a){if(null==a||""===a)return{success:!0};var b=this.number(a);return b.success?(b=+a>=0,{success:b,message:!b&&g.notNegativeNumber}):b},notNegativeInt:function(a){if(null==a||""===a)return{success:!0};var b=this.notNegativeNumber(a);return b.success?(b=/^\+?\d+$/.test(a),{success:b,message:!b&&g.notNegativeInt}):b},notPositiveNumber:function(a){if(null==a||""===a)return{success:!0};var b=this.number(a);return b.success?(b=0>=+a,{success:b,message:!b&&g.notPositiveNumber}):b},notPositiveInt:function(a){if(null==a||""===a)return{success:!0};var b=this.notPositiveNumber(a);return b.success?(b=/^\-\d+$/.test(a),{success:b,message:!b&&g.notPositiveInt}):b},email:function(a){return null==a||""===a?{success:!0}:/^[a-z0-9][a-z0-9\-_]*@[a-z0-9][a-z0-9\-_]*\.(?:com|cn|net|com\.cn)$/i.test(a)?{success:!0}:{success:!1,message:g.email}},mobile:function(a){return null==a||""===a?{success:!0}:b.mobile.test(a)?{success:!0}:{success:!1,message:g.mobile}},minLength:function(a,b){return null==a||a.length<b?{success:!1,message:d.format(g.minLength,{minLength:b})}:{success:!0}},maxLength:function(a,b){return null==a||a.length>b?{success:!1,message:d.format(g.maxLength,{maxLength:b})}:{success:!0}},password:function(a){return null==a||""===a?{success:!0}:b.password.test(a)?{success:!0}:{success:!1,message:g.password}},birthday:function(a){return null==a||""===a?{success:!0}:b.birthday.test(a)?{success:!0}:{success:!1,message:g.birthday}},qq:function(a){return null==a||""===a?{success:!0}:b.qq.test(a)?{success:!0}:{success:!1,message:g.qq}},date:function(a){return null==a||""===a?{success:!0}:b.date.test(a)?{success:!0}:{success:!1,message:g.date}},datetime:function(a){return null==a||""===a?{success:!0}:b.datetime.test(a)?{success:!0}:{success:!1,message:g.datetime}},idCard:function(a){if(!a)return{success:!0};var c=b.idCard;if(!c.test(a))return{success:!1,message:g.idCard};var d="11,12,13,14,15,21,22,23,31,32,33,34,35,36,37,41,42,43,44,45,46,50,51,52,53,54,61,62,63,64,65,71,81,82,91",e=0,f=a.length;if(!/^\d{17}(\d|x)$/i.test(a))return{success:!1,message:g.idCard};var h=a.replace(/x$/i,"a"),i=h.substr(0,2);if(!(d.indexOf(i)>=0))return{success:!1,message:g.idCard};if(18==f){sBirthday=h.substr(6,4)+"-"+Number(h.substr(10,2))+"-"+Number(h.substr(12,2));var j=new Date(sBirthday.replace(/-/g,"/"));if(sBirthday!=j.getFullYear()+"-"+(j.getMonth()+1)+"-"+j.getDate())return{success:!1,message:g.idCard};for(var k=17;k>=0;k--)e+=Math.pow(2,k)%11*parseInt(h.charAt(17-k),11);if(e%11!=1)return{success:!1,message:g.idCard}}return{success:!0}},"float":function(a,b){if(null==a||""===a)return{success:!0};var c=this.number(a);if(!c.success)return c;if(null==b||""===b||0==b)return{success:!0};var e=new RegExp("^(?:\\+|\\-)?(?:\\d+\\.?|\\d*\\.\\d{"+b+"})$");return e.test(a)?{success:!0}:{success:!1,message:d.format(g["float"],{digit:b})}}};this.getRule=function(a){return h[a]},this.getMessage=function(a){return g[a]},this.getErrorTipNode=function(a){return f.g("[for="+a.id+"]")||f.g(".errorTip",a.parentNode)},this.getErrorTipContentNode=function(a){return f.g(".content",a)||a},this.showErrorTip=function(b,c){var d=this.getErrorTipNode(b);if(d){a(d);var e=this.getErrorTipContentNode(d);e&&(f.setText(e,c),f.show(d),this.autoClose(b,d))}},this.hideErrorTip=function(b){var c=this.getErrorTipNode(b);if(c){a(c);var d=this.getErrorTipContentNode(c);d&&(f.setText(d,""),f.hide(c))}},this.autoClose=function(a,b){var d,e=f.getAttr(b,"data-autoclose"),g=this;if(e&&"0"!==e&&"false"!==e){var h=f.getAttr(b,"data-autoclose-seconds");d=h&&c.isNumber(+h)?+h:g.autoCloseSeconds,b.autoCloseTimer=setTimeout(function(){g.hideErrorTip(a)},1e3*d)}},this.autoCloseSeconds=5,this.validate=function(a,b){if(c.isPlainObject(a)&&(a=[a]),!a.length)return!0;var d=b.value,f=this,g=e.each(a,function(a){var c=h[a.ruleName];if(!c)return!0;var e=a.rulePropertys.slice();e.unshift(d);var g=c.apply(h,e);return g.success?!0:(f.showErrorTip(b,g.message),!1)});return g&&f.hideErrorTip(b),g},this.addValidator=function(a){if(c.isPlainObject(a))a.validate&&!h[a.name]&&(h[a.name]=a.validate),a.message&&!g[a.name]&&(g[a.name]=a.message);else if(c.isArray(a)){var b=arguments;e.forEach(a,function(a){b.callee(a)})}}}.call(b.prototype),new b}),define("errorTrack",["bird.event","bird.object","bird.dom","bird.browser","bird.array","bird.request","bird.logger"],function(a){var b,c=a("bird.event"),d=a("bird.object"),e=a("bird.dom"),f=a("bird.browser"),g=(a("bird.array"),a("bird.request")),h=a("bird.logger"),i=[],j={url:"",maxClickpathLength:10};return{init:function(a){d.extend(j,a);var f=this;c.addListener(document.body,"click",function(a){var c=a.target;1===c.nodeType&&(b={id:c.id,tagName:c.tagName,path:e.getTreePath(c),url:location.href,className:c.className,value:c.value||"",text:c.textContent||c.innerText||"",src:c.src||""},i.length===j.maxClickpathLength&&i.shift(),i.push(b))},!0),c.addListener(window,"error",function(a){f.send(f.getErrorInfo(a)),f.clear()}),h.log("ErrorTrack Module Inited!")},clear:function(){i=[],b&&(i.push(b),b=null)},send:function(a,b){g.imageGet(j.url+JSON.stringify(a),b)},getErrorInfo:function(a){return{error:{lineNumber:a.lineno||a.errorLine,fileName:a.filename||a.errorUrl,columnNumber:a.colno||a.errorCharacter,message:a.message||a.errorMessage,stack:a.error&&a.error.stack||""},clickpath:i,browser:f.browser,callee:arguments.callee.toString()}}}});